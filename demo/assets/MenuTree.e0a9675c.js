var y=(x,u,o)=>new Promise((l,i)=>{var t=a=>{try{d(o.next(a))}catch(e){i(e)}},h=a=>{try{d(o.throw(a))}catch(e){i(e)}},d=a=>a.done?l(a.value):Promise.resolve(a.value).then(t,h);d((o=o.apply(x,u)).next())});import{_ as V,r as M,o as L,E as S,h as c,L as E,C as j,j as k,i as m,s as C,w as _,e as r,m as v,d as b,k as w,v as f,J as I,x as J,M as K,n as P}from"./index.7b6fce2d.js";import{u as U}from"./usePagination.ee26acc1.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const $=w(" \u65B0\u5EFA\u83DC\u5355 "),q={class:"tree-row"},z={class:"tree-row__name"},A={key:0},F={class:"color-error"},G={key:1},H={__name:"MenuTree",emits:["select","ready"],setup(x,{emit:u}){const{list:o,loading:l}=U(),i=M([]),t=M("");L(()=>{h()});function h(){return y(this,null,function*(){l.value=!0;const{code:e,data:s}=yield S.system.getNewMenuList().catch(()=>{l.value=!1});if(l.value=!1,e===200){const{rows:p}=s;o.value=p,u("ready",p)}})}function d(e,{node:s}){!e.length||(i.value=e,u("select",s))}function a({id:e}){K.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>y(this,null,function*(){P.info("\u70B9\u51FB\u4E86\u5220\u9664")})})}return(e,s)=>{const p=c("a-input-search"),g=c("icon-plus-outlined"),N=c("icon-delete-outlined"),B=c("a-space"),D=c("a-tree"),O=c("a-card"),T=E("loading");return j((m(),C(O,{bordered:!1,type:"flex"},{title:_(()=>[r(p,{value:t.value,"onUpdate:value":s[0]||(s[0]=n=>t.value=n),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22"},null,8,["value"])]),actions:_(()=>[v("div",null,[r(g),$])]),default:_(()=>[k(l)?J("",!0):(m(),C(D,{key:0,"selected-keys":i.value,"tree-data":k(o),"field-names":{title:"name",children:"children",key:"key"},"default-expand-all":"","block-node":"",onSelect:d},{title:_(n=>[v("div",q,[v("div",z,[n.name.indexOf(t.value)>-1?(m(),b("span",A,[w(f(n.name.substr(0,n.name.indexOf(t.value)))+" ",1),v("span",F,f(t.value),1),w(" "+f(n.name.substr(n.name.indexOf(t.value)+t.value.length)),1)])):(m(),b("span",G,f(n.name),1))]),r(B,{class:"tree-row__actions",onClick:s[1]||(s[1]=I(()=>{},["stop"]))},{default:_(()=>[r(g),r(N,{onClick:Q=>a(n)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["selected-keys","tree-data"]))]),_:1})),[[T,k(l)]])}}},ee=V(H,[["__scopeId","data-v-c3dba8d3"]]);export{ee as default};
