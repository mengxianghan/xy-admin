var A=Object.defineProperty;var z=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var I=(n,o,a)=>o in n?A(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a,C=(n,o)=>{for(var a in o||(o={}))L.call(o,a)&&I(n,a,o[a]);if(z)for(var a of z(o))O.call(o,a)&&I(n,a,o[a]);return n};var k=(n,o,a)=>new Promise((p,m)=>{var v=i=>{try{f(a.next(i))}catch(d){m(d)}},y=i=>{try{f(a.throw(i))}catch(d){m(d)}},f=i=>i.done?p(i.value):Promise.resolve(i.value).then(v,y);f((a=a.apply(n,o)).next())});import{_ as T,u as $,a as D,b as G,r as H,c as J,o as K,d as Q,e,w as t,f as W,g as X,h as u,i as Y,j as r,k as U,p as Z,l as ee,m as B,n as oe,q as te,t as ae,M as ne}from"./index.7b6fce2d.js";import{u as se}from"./useForm.98a74fe7.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const E=n=>(Z("data-v-6c394f4e"),n=n(),ee(),n),re=U("\u767B\u5F55 "),le=E(()=>B("span",{class:"cursor-pointer"},"\u83B7\u53D6\u9A8C\u8BC1\u7801",-1)),ue=U("\u767B\u5F55 "),ie=E(()=>B("div",{class:"color-secondary"},'\u626B\u7801\u540E\u70B9\u51FB"\u786E\u8BA4"\uFF0C\u5373\u53EF\u5B8C\u6210\u767B\u5F55',-1)),de={__name:"index",setup(n){const{formState:o,formRef:a,rules:p}=se(),m=$(),v=D(),y=G(),f=W(),i=X(),d=H(!1),w=J(()=>{var l,s;return decodeURIComponent((s=(l=i.query)==null?void 0:l.redirect)!=null?s:"")});p.value={username:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}},K(()=>{v.logout()});function g(){return k(this,null,function*(){a.value.validate().then(l=>k(this,null,function*(){d.value=!0;const{code:s}=yield v.login(C({},l)).catch(()=>{d.value=!1,oe.error("\u767B\u5F55\u5931\u8D25")});d.value=!1,s===200&&(m.complete||(yield m.init()),h())}))})}function M(){const l=y.indexRouter;return l||ne.warning({title:"\u7CFB\u7EDF\u63D0\u793A",content:"\u6CA1\u6709\u4EFB\u4F55\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",onOk:()=>{window.location.reload()}}),l}function h(){if(w.value)location.href=w.value;else{const l=M();if(!l)return;f.push(l)}te.success({message:"\u6B22\u8FCE",description:`${ae()}\uFF0C\u6B22\u8FCE\u56DE\u6765`})}return(l,s)=>{const N=u("icon-user-outlined"),x=u("a-input"),_=u("a-form-item"),R=u("icon-lock-outlined"),S=u("a-button"),q=u("a-form"),b=u("a-tab-pane"),V=u("icon-mobile-outlined"),F=u("x-qr-code"),P=u("a-divider"),j=u("a-tabs");return Y(),Q("div",null,[e(j,null,{default:t(()=>[e(b,{key:"account",tab:"\u8D26\u53F7\u767B\u5F55"},{default:t(()=>[e(q,{model:r(o),rules:r(p),ref_key:"formRef",ref:a},{default:t(()=>[e(_,{name:"username"},{default:t(()=>[e(x,{value:r(o).username,"onUpdate:value":s[0]||(s[0]=c=>r(o).username=c),size:"large",placeholder:"admin"},{prefix:t(()=>[e(N)]),_:1},8,["value"])]),_:1}),e(_,{name:"password"},{default:t(()=>[e(x,{value:r(o).password,"onUpdate:value":s[1]||(s[1]=c=>r(o).password=c),size:"large",type:"password",placeholder:"123456",onPressEnter:g},{prefix:t(()=>[e(R)]),_:1},8,["value"])]),_:1}),e(_,null,{default:t(()=>[e(S,{type:"primary",size:"large",block:"",loading:d.value,onClick:g},{default:t(()=>[re]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(b,{key:"phone",tab:"\u624B\u673A\u53F7\u767B\u5F55"},{default:t(()=>[e(q,{model:r(o),rules:r(p),ref_key:"formRef",ref:a},{default:t(()=>[e(_,{name:"username"},{default:t(()=>[e(x,{value:r(o).username,"onUpdate:value":s[2]||(s[2]=c=>r(o).username=c),size:"large",placeholder:"\u624B\u673A\u53F7\u7801"},{prefix:t(()=>[e(V)]),_:1},8,["value"])]),_:1}),e(_,{name:"msgCode"},{default:t(()=>[e(x,{value:r(o).password,"onUpdate:value":s[3]||(s[3]=c=>r(o).password=c),size:"large",placeholder:"\u77ED\u4FE1\u9A8C\u8BC1\u7801",onPressEnter:g},{prefix:t(()=>[e(R)]),suffix:t(()=>[le]),_:1},8,["value"])]),_:1}),e(_,null,{default:t(()=>[e(S,{type:"primary",size:"large",block:"",loading:d.value,onClick:g},{default:t(()=>[ue]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(b,{key:"qrcode",tab:"\u4E8C\u7EF4\u7801\u767B\u5F55",class:"align-center"},{default:t(()=>[e(F,{text:"https://mengxianghan.github.io/xy-admin/demo/",size:240}),e(P,{plain:""},{default:t(()=>[ie]),_:1})]),_:1})]),_:1})])}}},ve=T(de,[["__scopeId","data-v-6c394f4e"]]);export{ve as default};
