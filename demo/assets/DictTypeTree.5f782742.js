var V=(_,o,a)=>new Promise((e,r)=>{var y=n=>{try{c(a.next(n))}catch(i){r(i)}},p=n=>{try{c(a.throw(n))}catch(i){r(i)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(y,p);c((a=a.apply(_,o)).next())});import{_ as S,r as w,o as b,D as B,h as l,i as v,d as C,e as d,w as m,l as f,j as D,q as M,s as h,I as T,v as N,F as O,M as R,m as E}from"./index.15d75692.js";import{u as F}from"./usePagination.33b21ff5.js";import I from"./DictTypeEdit.16e4e354.js";import"./tinymce.b4091e4a.js";import"./echarts.cbe68697.js";import"./useModal.a8ea85e1.js";import"./useForm.25159ea8.js";const K={name:"DictTypeTree",components:{DictTypeEdit:I},emits:["select"],setup(_,{emit:o}){const{loading:a,list:e}=F(),r=w([]),y=w(""),p=w();b(()=>{c()});function c(){return V(this,null,function*(){a.value=!0;const{code:s,data:u}=yield B.system.getDictTypeList().catch(()=>{a.value=!1});if(a.value=!1,s===200){const{rows:g}=u;e.value=g}})}function n(s,{node:u}){!s.length||(r.value=s,k(u))}function i({id:s}){R.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>V(this,null,function*(){E.info("\u70B9\u51FB\u4E86\u5220\u9664")})})}function k(s){o("select",s)}return{list:e,loading:a,selectedKeys:r,searchValue:y,editRef:p,handleSelect:n,handleDelete:i}}},L={class:"tree-row"},j={class:"tree-row__name"},q={key:0},P={class:"color-error"},U={key:1},z={class:"tree-row__code"};function A(_,o,a,e,r,y){const p=l("a-input-search"),c=l("icon-plus-outlined"),n=l("icon-edit-outlined"),i=l("icon-delete-outlined"),k=l("a-space"),s=l("a-tree"),u=l("a-card"),g=l("dict-type-edit");return v(),C(O,null,[d(u,{bordered:!1,type:"flex"},{title:m(()=>[d(p,{value:e.searchValue,"onUpdate:value":o[0]||(o[0]=t=>e.searchValue=t),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22"},null,8,["value"])]),actions:m(()=>[f("span",{onClick:o[1]||(o[1]=t=>_.$refs.editRef.handleCreate())},[d(c),D(" \u65B0\u5EFA\u5206\u7C7B ")])]),default:m(()=>[e.loading?N("",!0):(v(),M(s,{key:0,"selected-keys":e.selectedKeys,"tree-data":e.list,"field-names":{title:"name",children:"children",key:"key"},"default-expand-all":"","block-node":"",onSelect:e.handleSelect},{title:m(t=>[f("div",L,[f("div",j,[t.name.indexOf(e.searchValue)>-1?(v(),C("span",q,[D(h(t.name.substr(0,t.name.indexOf(e.searchValue)))+" ",1),f("span",P,h(e.searchValue),1),D(" "+h(t.name.substr(t.name.indexOf(e.searchValue)+e.searchValue.length)),1)])):(v(),C("span",U,h(t.name),1))]),f("div",z,h(t.code),1),d(k,{class:"tree-row__actions",onClick:o[2]||(o[2]=T(()=>{},["stop"]))},{default:m(()=>[d(n,{onClick:T(x=>_.$refs.editRef.handleEdit(t),["stop"])},null,8,["onClick"]),d(i,{onClick:x=>e.handleDelete(t)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["selected-keys","tree-data","onSelect"]))]),_:1}),d(g,{ref:"editRef"},null,512)],64)}const $=S(K,[["render",A],["__scopeId","data-v-1f7e68c1"]]);export{$ as default};
