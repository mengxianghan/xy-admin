var M=Object.defineProperty;var P=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var V=(l,t,e)=>t in l?M(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,z=(l,t)=>{for(var e in t||(t={}))j.call(t,e)&&V(l,e,t[e]);if(P)for(var e of P(t))q.call(t,e)&&V(l,e,t[e]);return l};var v=(l,t,e)=>new Promise((a,_)=>{var m=d=>{try{s(e.next(d))}catch(r){_(r)}},f=d=>{try{s(e.throw(d))}catch(r){_(r)}},s=d=>d.done?a(d.value):Promise.resolve(d.value).then(m,f);s((e=e.apply(l,t)).next())});import{_ as A,r as R,h as c,i as y,d as I,e as n,w as o,q as B,F as O,j as x,v as E,M as G,D as F,m as H}from"./index-ed9c130b.js";import{u as J}from"./usePagination-86ed5fbd.js";import Q from"./Edit-2e08f733.js";import U from"./DictTypeTree-57322723.js";import"./tinymce-87fd2522.js";import"./echarts-c0f2d21b.js";import"./useModal-eccda7d1.js";import"./useForm-bc32d484.js";import"./DictTypeEditDialog-f66f46fd.js";const W={name:"systemDict",components:{Edit:Q,DictTypeTree:U},setup(){const{list:l,pagination:t,loading:e,resetPagination:a,searchForm:_}=J(),m=R([]),f=R(),s=R(null),d=[{title:"名称",dataIndex:"name"},{title:"键值",dataIndex:"keyValue",width:240},{title:"是否有效",key:"valid",dataIndex:"valid",width:120},{title:"操作",key:"action",width:120}];function r(){return v(this,null,function*(){const{pageSize:i,current:p}=t;e.value=!0;const{code:u,data:k}=yield F.common.getPageList(z({pageSize:i,page:p},_.value)).catch(()=>{e.value=!1});e.value=!1,u===200&&(l.value=k.rows,t.total=k.total)})}function g(){a(),r()}function w(p){return v(this,arguments,function*({id:i}){G.confirm({title:"删除提示",content:"确认删除？",onOk:()=>v(this,null,function*(){e.value=!0;const{code:u}=yield F.common.deleteData({id:i}).catch(()=>{e.value=!1});u===200?(H.success("删除成功"),yield r()):e.value=!1})})})}function C({current:i,pageSize:p}){t.current=i,t.pageSize=p,r()}function h(i){m.value=i}function b(i){s.value=i,_.value.type=i.key,r()}function S(){r()}return{editRef:f,columns:d,loading:e,list:l,pagination:t,dictTypeInfo:s,selectedRowKeys:m,handleSearch:g,handleDelete:w,onTableChange:C,onSelectChange:h,onDictTypeSelect:b,onOk:S}}};function X(l,t,e,a,_,m){const f=c("dict-type-tree"),s=c("a-col"),d=c("a-empty"),r=c("icon-plus-outlined"),g=c("a-button"),w=c("a-input"),C=c("a-form-item"),h=c("a-row"),b=c("a-form"),S=c("x-search-bar"),i=c("x-action-bar"),p=c("a-switch"),u=c("x-action-button"),k=c("a-table"),K=c("a-card"),N=c("edit");return y(),I(O,null,[n(h,{type:"flex",gutter:16,style:{position:"absolute",left:0,right:0,top:0,bottom:0}},{default:o(()=>[n(s,{flex:"0 0 300px"},{default:o(()=>[n(f,{onSelect:a.onDictTypeSelect},null,8,["onSelect"])]),_:1}),n(s,{flex:"1"},{default:o(()=>[n(K,{bordered:!1,type:"flex"},{default:o(()=>[a.dictTypeInfo?(y(),I(O,{key:1},[n(i,{class:"mb-8-2"},{extra:o(()=>[n(S,{"body-style":{padding:0}},{default:o(()=>[n(b,{layout:"inline"},{default:o(()=>[n(h,{gutter:12,type:"flex"},{default:o(()=>[n(s,null,{default:o(()=>[n(C,null,{default:o(()=>[n(w)]),_:1})]),_:1}),n(s,null,{default:o(()=>[n(g,{type:"primary",ghost:"",onClick:a.handleSearch},{default:o(()=>[x("搜索 ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),default:o(()=>[n(g,{type:"primary",onClick:t[0]||(t[0]=T=>l.$refs.editRef.handleCreate())},{icon:o(()=>[n(r)]),default:o(()=>[x(" 新建项 ")]),_:1})]),_:1}),n(k,{columns:a.columns,pagination:a.pagination,"data-source":a.list,loading:a.loading,"row-key":"id","row-selection":{selectedRowKeys:a.selectedRowKeys,onChange:a.onSelectChange},onChange:a.onTableChange},{bodyCell:o(({column:T,record:D})=>[T.key==="valid"?(y(),B(p,{key:0,checked:D.valid,size:"small"},null,8,["checked"])):E("",!0),T.key==="action"?(y(),I(O,{key:1},[n(u,{onClick:L=>l.$refs.editRef.handleEdit(D)},{default:o(()=>[x("编辑")]),_:2},1032,["onClick"]),n(u,{onClick:L=>a.handleDelete(D)},{default:o(()=>[x(" 删除 ")]),_:2},1032,["onClick"])],64)):E("",!0)]),_:1},8,["columns","pagination","data-source","loading","row-selection","onChange"])],64)):(y(),B(d,{key:0,description:"请选择字典分类"}))]),_:1})]),_:1})]),_:1}),n(N,{ref:"editRef",onOk:a.onOk},null,8,["onOk"])],64)}const ie=A(W,[["render",X]]);export{ie as default};
