var w=(v,a,s)=>new Promise((e,c)=>{var m=t=>{try{l(s.next(t))}catch(n){c(n)}},d=t=>{try{l(s.throw(t))}catch(n){c(n)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(m,d);l((s=s.apply(v,a)).next())});import{_ as D,r as g,o as B,D as N,h as i,K as S,B as b,i as p,q as x,w as _,e as u,l as y,j as h,d as M,s as k,I as O,v as T,M as V,m as K}from"./index.15d75692.js";import{u as I}from"./usePagination.33b21ff5.js";import"./tinymce.b4091e4a.js";import"./echarts.cbe68697.js";const L={name:"MenuTree",emits:["select","ready"],setup(v,{emit:a}){const{list:s,loading:e}=I(),c=g([]),m=g("");B(()=>{d()});function d(){return w(this,null,function*(){e.value=!0;const{code:n,data:r}=yield N.system.getNewMenuList().catch(()=>{e.value=!1});if(e.value=!1,n===200){const{rows:f}=r;s.value=f,a("ready",f)}})}function l(n,{node:r}){!n.length||(c.value=n,a("select",r))}function t({id:n}){V.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>w(this,null,function*(){K.info("\u70B9\u51FB\u4E86\u5220\u9664")})})}return{list:s,loading:e,selectedKeys:c,keyword:m,handleSelect:l,handleDelete:t}}},j={class:"tree-row"},q={class:"tree-row__name"},E={key:0},P={class:"color-error"},U={key:1};function z(v,a,s,e,c,m){const d=i("a-input-search"),l=i("icon-plus-outlined"),t=i("icon-delete-outlined"),n=i("a-space"),r=i("a-tree"),f=i("a-card"),C=S("loading");return b((p(),x(f,{bordered:!1,type:"flex"},{title:_(()=>[u(d,{value:e.keyword,"onUpdate:value":a[0]||(a[0]=o=>e.keyword=o),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22"},null,8,["value"])]),actions:_(()=>[y("div",null,[u(l),h(" \u65B0\u5EFA\u83DC\u5355 ")])]),default:_(()=>[e.loading?T("",!0):(p(),x(r,{key:0,"selected-keys":e.selectedKeys,"tree-data":e.list,"field-names":{title:"name",children:"children",key:"key"},"default-expand-all":"","block-node":"",onSelect:e.handleSelect},{title:_(o=>[y("div",j,[y("div",q,[o.name.indexOf(e.keyword)>-1?(p(),M("span",E,[h(k(o.name.substr(0,o.name.indexOf(e.keyword)))+" ",1),y("span",P,k(e.keyword),1),h(" "+k(o.name.substr(o.name.indexOf(e.keyword)+e.keyword.length)),1)])):(p(),M("span",U,k(o.name),1))]),u(n,{class:"tree-row__actions",onClick:a[1]||(a[1]=O(()=>{},["stop"]))},{default:_(()=>[u(l),u(t,{onClick:A=>e.handleDelete(o)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["selected-keys","tree-data","onSelect"]))]),_:1})),[[C,e.loading]])}const R=D(L,[["render",z],["__scopeId","data-v-f0a11ae8"]]);export{R as default};
