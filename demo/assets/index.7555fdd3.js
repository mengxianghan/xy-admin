var I=Object.defineProperty;var b=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var k=(r,e,n)=>e in r?I(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,w=(r,e)=>{for(var n in e||(e={}))q.call(e,n)&&k(r,n,e[n]);if(b)for(var n of b(e))U.call(e,n)&&k(r,n,e[n]);return r};var h=(r,e,n)=>new Promise((a,m)=>{var v=s=>{try{u(n.next(s))}catch(i){m(i)}},f=s=>{try{u(n.throw(s))}catch(i){m(i)}},u=s=>s.done?a(s.value):Promise.resolve(s.value).then(v,f);u((n=n.apply(r,e)).next())});import{_ as E,u as L,a as P,b as B,r as M,c as N,o as V,d as A,e as o,w as t,f as F,g as j,m as O,n as T,t as X,h as d,i as Y,j as y,M as D,p as G,k as H,l as R}from"./index.15d75692.js";import{u as J}from"./useForm.25159ea8.js";import"./tinymce.b4091e4a.js";import"./echarts.cbe68697.js";const K={setup(){const{formState:r,formRef:e,rules:n}=J(),a=L(),m=P(),v=B(),f=F(),u=j(),s="XYAdmin",i=M(!1),p=N(()=>{var l,_;return decodeURIComponent((_=(l=u.query)==null?void 0:l.redirect)!=null?_:"")});n.value={username:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}},V(()=>{m.logout()});function x(){return h(this,null,function*(){e.value.validate().then(l=>h(this,null,function*(){i.value=!0;const{code:_}=yield m.login(w({},l)).catch(()=>{i.value=!1,O.error("\u767B\u5F55\u5931\u8D25")});i.value=!1,_===200&&(a.complete||(yield a.init()),S())}))})}function g(){const l=v.indexRouter;return l||D.warning({title:"\u7CFB\u7EDF\u63D0\u793A",content:"\u6CA1\u6709\u4EFB\u4F55\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",onOk:()=>{window.location.reload()}}),l}function S(){if(p.value)location.href=p.value;else{const l=g();if(!l)return;f.push(l)}T.success({message:"\u6B22\u8FCE",description:`${X()}\uFF0C\u6B22\u8FCE\u56DE\u6765`})}return{rules:n,formState:r,formRef:e,title:s,loading:i,handleLogin:x}}},C=r=>(G("data-v-09571744"),r=r(),H(),r),Q=C(()=>R("span",{class:"cursor-pointer"},"\u83B7\u53D6\u9A8C\u8BC1\u7801",-1)),W=C(()=>R("div",{class:"color-secondary"},'\u626B\u7801\u540E\u70B9\u51FB"\u786E\u8BA4"\uFF0C\u5373\u53EF\u5B8C\u6210\u767B\u5F55',-1));function Z(r,e,n,a,m,v){const f=d("icon-user-outlined"),u=d("a-input"),s=d("a-form-item"),i=d("icon-lock-outlined"),p=d("a-button"),x=d("a-form"),g=d("a-tab-pane"),S=d("icon-mobile-outlined"),l=d("x-qr-code"),_=d("a-divider"),z=d("a-tabs");return Y(),A("div",null,[o(z,null,{default:t(()=>[o(g,{key:"account",tab:"\u8D26\u53F7\u767B\u5F55"},{default:t(()=>[o(x,{model:a.formState,rules:a.rules,ref:"formRef"},{default:t(()=>[o(s,{name:"username"},{default:t(()=>[o(u,{value:a.formState.username,"onUpdate:value":e[0]||(e[0]=c=>a.formState.username=c),size:"large",placeholder:"admin"},{prefix:t(()=>[o(f)]),_:1},8,["value"])]),_:1}),o(s,{name:"password"},{default:t(()=>[o(u,{value:a.formState.password,"onUpdate:value":e[1]||(e[1]=c=>a.formState.password=c),size:"large",type:"password",placeholder:"123456",onPressEnter:a.handleLogin},{prefix:t(()=>[o(i)]),_:1},8,["value","onPressEnter"])]),_:1}),o(s,null,{default:t(()=>[o(p,{type:"primary",size:"large",block:"",loading:a.loading,onClick:a.handleLogin},{default:t(()=>[y("\u767B\u5F55 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(g,{key:"phone",tab:"\u624B\u673A\u53F7\u767B\u5F55"},{default:t(()=>[o(x,{model:a.formState,rules:a.rules,ref:"formRef"},{default:t(()=>[o(s,{name:"username"},{default:t(()=>[o(u,{value:a.formState.username,"onUpdate:value":e[2]||(e[2]=c=>a.formState.username=c),size:"large",placeholder:"\u624B\u673A\u53F7\u7801"},{prefix:t(()=>[o(S)]),_:1},8,["value"])]),_:1}),o(s,{name:"msgCode"},{default:t(()=>[o(u,{value:a.formState.password,"onUpdate:value":e[3]||(e[3]=c=>a.formState.password=c),size:"large",placeholder:"\u77ED\u4FE1\u9A8C\u8BC1\u7801",onPressEnter:a.handleLogin},{prefix:t(()=>[o(i)]),suffix:t(()=>[Q]),_:1},8,["value","onPressEnter"])]),_:1}),o(s,null,{default:t(()=>[o(p,{type:"primary",size:"large",block:"",loading:a.loading,onClick:a.handleLogin},{default:t(()=>[y("\u767B\u5F55 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(g,{key:"qrcode",tab:"\u4E8C\u7EF4\u7801\u767B\u5F55",class:"align-center"},{default:t(()=>[o(l,{text:"https://mengxianghan.github.io/xy-admin/demo/",size:240}),o(_,{plain:""},{default:t(()=>[W]),_:1})]),_:1})]),_:1})])}const ne=E(K,[["render",Z],["__scopeId","data-v-09571744"]]);export{ne as default};
