var C=(m,r,l)=>new Promise((t,f)=>{var g=o=>{try{i(l.next(o))}catch(u){f(u)}},c=o=>{try{i(l.throw(o))}catch(u){f(u)}},i=o=>o.done?t(o.value):Promise.resolve(o.value).then(g,c);i((l=l.apply(m,r)).next())});import{_ as z,r as F,o as L,h as a,i as v,d as D,e,w as n,j as s,F as O,l as j,v as q,D as S,M as A,m as G}from"./index.15d75692.js";import H from"./Edit.4e204b77.js";import{u as J}from"./usePagination.33b21ff5.js";import"./tinymce.b4091e4a.js";import"./echarts.cbe68697.js";import"./useModal.a8ea85e1.js";import"./useForm.25159ea8.js";const K={name:"listBasic",components:{Edit:H},setup(){const m=[{title:"ID",dataIndex:"id",width:64,align:"center"},{title:"\u6807\u9898",dataIndex:"title"},{title:"\u64CD\u4F5C",key:"action",width:180}],{list:r,pagination:l,loading:t,resetPagination:f}=J(),g=F();function c(){return C(this,null,function*(){const{pageSize:_,current:d}=l;t.value=!0;const{code:h,data:p}=yield S.common.getPageList({pageSize:_,page:d}).catch(()=>{t.value=!1});t.value=!1,h===200&&(r.value=p.rows,l.total=p.total)})}function i(){f(),c()}function o({id:_}){A.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>C(this,null,function*(){t.value=!0;const{code:d}=yield S.common.deleteData({id:_}).catch(()=>{t.value=!1});d===200?(G.success("\u5220\u9664\u6210\u529F"),yield c()):t.value=!1})})}function u({current:_,pageSize:d}){l.current=_,l.pageSize=d,c()}function k(){c()}return L(()=>{c()}),{editRef:g,columns:m,loading:t,list:r,pagination:l,handleSearch:i,handleDelete:o,onTableChange:u,onOk:k}}};function Q(m,r,l,t,f,g){const c=a("a-input"),i=a("a-form-item"),o=a("a-col"),u=a("a-select"),k=a("a-range-picker"),_=a("a-button"),d=a("a-row"),h=a("a-form"),p=a("x-search-bar"),B=a("icon-plus-outlined"),N=a("x-action-bar"),b=a("x-action-button"),P=a("icon-down-outlined"),y=a("a-menu-item"),R=a("a-menu"),V=a("a-dropdown"),E=a("a-table"),I=a("a-card"),M=a("edit");return v(),D(O,null,[e(p,{class:"mb-8-2"},{default:n(()=>[e(h,{layout:"inline"},{default:n(()=>[e(d,{gutter:16},{default:n(()=>[e(o,{span:6},{default:n(()=>[e(i,{label:"\u6807\u9898"},{default:n(()=>[e(c)]),_:1})]),_:1}),e(o,{span:6},{default:n(()=>[e(i,{label:"\u6807\u9898"},{default:n(()=>[e(u)]),_:1})]),_:1}),e(o,{span:6},{default:n(()=>[e(i,{label:"\u6807\u9898"},{default:n(()=>[e(k)]),_:1})]),_:1}),e(o,{span:6},{default:n(()=>[e(_,{type:"primary",ghost:"",onClick:t.handleSearch},{default:n(()=>[s("\u641C\u7D22 ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),e(I,{bordered:!1},{default:n(()=>[e(N,{class:"mb-8-2"},{extra:n(()=>[e(p,{"body-style":{padding:0}},{default:n(()=>[e(h,{layout:"inline"},{default:n(()=>[e(d,{gutter:12,type:"flex"},{default:n(()=>[e(o,null,{default:n(()=>[e(i,null,{default:n(()=>[e(c)]),_:1})]),_:1}),e(o,null,{default:n(()=>[e(_,{type:"primary",ghost:"",onClick:t.handleSearch},{default:n(()=>[s("\u641C\u7D22 ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),default:n(()=>[e(_,{type:"primary",onClick:r[0]||(r[0]=w=>m.$refs.editRef.handleCreate())},{icon:n(()=>[e(B)]),default:n(()=>[s(" \u65B0\u5EFA ")]),_:1})]),_:1}),e(E,{columns:t.columns,pagination:t.pagination,"data-source":t.list,loading:t.loading,"row-key":"id",onChange:t.onTableChange},{bodyCell:n(({column:w,record:x,index:U})=>[w.key==="action"?(v(),D(O,{key:0},[e(b,{onClick:T=>m.$refs.editRef.handleEdit(x)},{default:n(()=>[s("\u7F16\u8F91")]),_:2},1032,["onClick"]),e(b,{onClick:T=>t.handleDelete(x)},{default:n(()=>[s("\u5220\u9664")]),_:2},1032,["onClick"]),e(b,{tag:"span"},{default:n(()=>[e(V,{trigger:["click"]},{overlay:n(()=>[e(R,null,{default:n(()=>[e(y,null,{default:n(()=>[s("\u83DC\u5355 1")]),_:1}),e(y,null,{default:n(()=>[s("\u83DC\u5355 2")]),_:1}),e(y,null,{default:n(()=>[s("\u83DC\u5355 3")]),_:1})]),_:1})]),default:n(()=>[j("a",null,[s(" \u66F4\u591A "),e(P)])]),_:1})]),_:1})],64)):q("",!0)]),_:1},8,["columns","pagination","data-source","loading","onChange"])]),_:1}),e(M,{ref:"editRef",onOk:t.onOk},null,8,["onOk"])],64)}const ae=z(K,[["render",Q]]);export{ae as default};
