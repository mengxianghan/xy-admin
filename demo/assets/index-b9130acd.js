var b=(g,u,o)=>new Promise((e,_)=>{var p=a=>{try{l(o.next(a))}catch(i){_(i)}},m=a=>{try{l(o.throw(a))}catch(i){_(i)}},l=a=>a.done?e(a.value):Promise.resolve(a.value).then(p,m);l((o=o.apply(g,u)).next())});import{_ as D,r as S,o as F,D as w,h as c,i as y,d as k,e as n,w as t,F as x,j as d,l as N,v as P,M as V,m as B}from"./index-f770ad8c.js";import{u as I}from"./usePagination-965b137c.js";import"./tinymce-87fd2522.js";import"./echarts-c0f2d21b.js";const M={name:"listSearch",setup(){const g=[{title:"ID",dataIndex:"id",width:64,align:"center"},{title:"标题",dataIndex:"title"},{title:"操作",key:"action",width:180}],{list:u,pagination:o,loading:e,resetPagination:_,searchForm:p}=I(),m=S([{label:"所属类目",key:"type",type:"tag",options:[{label:"全部",value:0},{label:"类目2",value:2},{label:"类目3",value:3},{label:"类目4",value:4},{label:"类目5",value:5}]},{label:"owner",key:"owner",type:"input"}]);F(()=>{l()});function l(){return b(this,null,function*(){const{pageSize:s,current:r}=o;e.value=!0;const{code:v,data:h}=yield w.common.getPageList({pageSize:s,page:r}).catch(()=>{e.value=!1});e.value=!1,v===200&&(u.value=h.rows,o.total=h.total)})}function a(){_(),l()}function i({id:s}){V.confirm({title:"删除提示",content:"确认删除？",onOk:()=>b(this,null,function*(){e.value=!0;const{code:r}=yield w.common.deleteData({id:s}).catch(()=>{e.value=!1});r===200?(B.success("删除成功"),yield l()):e.value=!1})})}function f({current:s,pageSize:r}){o.current=s,o.pageSize=r,l()}return{columns:g,filterData:m,searchForm:p,pagination:o,list:u,loading:e,handleSearch:a,handleDelete:i,onTableChange:f}}};function T(g,u,o,e,_,p){const m=c("x-filter"),l=c("a-card"),a=c("x-action-button"),i=c("icon-down-outlined"),f=c("a-menu-item"),s=c("a-menu"),r=c("a-dropdown"),v=c("a-table");return y(),k(x,null,[n(l,{bordered:!1},{default:t(()=>[n(m,{"data-source":e.filterData,"label-width":100,"model-value":e.searchForm,onChange:e.handleSearch},null,8,["data-source","model-value","onChange"])]),_:1}),n(l,{bordered:!1,class:"mt-8-2"},{default:t(()=>[n(v,{columns:e.columns,pagination:e.pagination,"data-source":e.list,loading:e.loading,"row-key":"id",onChange:e.onTableChange},{bodyCell:t(({column:h,record:C})=>[h.key==="action"?(y(),k(x,{key:0},[n(a,null,{default:t(()=>[d("编辑")]),_:1}),n(a,{onClick:z=>e.handleDelete(C)},{default:t(()=>[d(" 删除 ")]),_:2},1032,["onClick"]),n(a,{tag:"span"},{default:t(()=>[n(r,{trigger:["click"]},{overlay:t(()=>[n(s,null,{default:t(()=>[n(f,null,{default:t(()=>[d("菜单 1")]),_:1}),n(f,null,{default:t(()=>[d("菜单 2")]),_:1}),n(f,null,{default:t(()=>[d("菜单 3")]),_:1})]),_:1})]),default:t(()=>[N("a",null,[d(" 更多 "),n(i)])]),_:1})]),_:1})],64)):P("",!0)]),_:1},8,["columns","pagination","data-source","loading","onChange"])]),_:1})],64)}const A=D(M,[["render",T]]);export{A as default};
