var L=Object.defineProperty;var h=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var C=(l,e,o)=>e in l?L(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o,k=(l,e)=>{for(var o in e||(e={}))M.call(e,o)&&C(l,o,e[o]);if(h)for(var o of h(e))R.call(e,o)&&C(l,o,e[o]);return l};var g=(l,e,o)=>new Promise((a,m)=>{var s=t=>{try{n(o.next(t))}catch(r){m(r)}},i=t=>{try{n(o.throw(t))}catch(r){m(r)}},n=t=>t.done?a(t.value):Promise.resolve(t.value).then(s,i);n((o=o.apply(l,e)).next())});import{u as q}from"./useModal-5ff77b06.js";import{u as y}from"./useForm-c124bf97.js";import{_ as A,h as u,i as B,q as E,w as _,e as p,x as N,D as U}from"./index-f770ad8c.js";import"./tinymce-87fd2522.js";import"./echarts-c0f2d21b.js";const V={emits:["ok"],setup(l,{emit:e}){const{modal:o,showModal:a,hideModal:m,showLoading:s,hideLoading:i}=q(),{formRef:n,rules:t,formRecord:r,formState:c,resetForm:w}=y();t.value={title:{required:!0,message:"请输入标题"}};function x(){a({title:"新建"})}function b(d){a({title:"编辑"}),r.value=d,c.value=N(d)}function D(){n.value.validateFields().then(d=>g(this,null,function*(){var v;s();const F=k({id:(v=c.value)==null?void 0:v.id},d);let f=null;f=yield U.common.saveData(F).catch(()=>{i()}),i(),(f==null?void 0:f.code)===200&&(m(),e("ok"))})).catch(()=>{i()})}function O(){m()}function S(){w()}return{modal:o,formRef:n,formState:c,rules:t,handleOk:D,handleCancel:O,handleCreate:x,handleEdit:b,onAfterClose:S}}};function j(l,e,o,a,m,s){const i=u("a-input"),n=u("a-form-item"),t=u("a-form"),r=u("a-modal");return B(),E(r,{visible:a.modal.visible,title:a.modal.title,"confirm-loading":a.modal.confirmLoading,"after-close":a.onAfterClose,onOk:a.handleOk,onCancel:a.handleCancel},{default:_(()=>[p(t,{ref:"formRef","scroll-to-first-error":"",layout:"vertical",model:a.formState,rules:a.rules},{default:_(()=>[p(n,{label:"标题",name:"title"},{default:_(()=>[p(i,{value:a.formState.title,"onUpdate:value":e[0]||(e[0]=c=>a.formState.title=c)},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading","after-close","onOk","onCancel"])}const P=A(V,[["render",j]]);export{P as default};
