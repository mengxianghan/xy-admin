var w=(k,f,l)=>new Promise((c,n)=>{var p=t=>{try{d(l.next(t))}catch(_){n(_)}},g=t=>{try{d(l.throw(t))}catch(_){n(_)}},d=t=>t.done?c(t.value):Promise.resolve(t.value).then(p,g);d((l=l.apply(k,f)).next())});import{r as j,o as z,E as y,h as o,i as x,d as C,e,w as a,j as m,F as D,m as E,x as L,k as u,M as O,n as T}from"./index.7b6fce2d.js";import{u as $}from"./usePagination.ee26acc1.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const q=u("\u7F16\u8F91"),A=u(" \u5220\u9664 "),G=u(" \u66F4\u591A "),H=u("\u83DC\u5355 1"),J=u("\u83DC\u5355 2"),K=u("\u83DC\u5355 3"),Q={name:"listSearch"},te=Object.assign(Q,{setup(k){const f=[{title:"ID",dataIndex:"id",width:64,align:"center"},{title:"\u6807\u9898",dataIndex:"title"},{title:"\u64CD\u4F5C",key:"action",width:180}],{list:l,pagination:c,loading:n,resetPagination:p,searchForm:g}=$(),d=j([{label:"\u6240\u5C5E\u7C7B\u76EE",key:"type",type:"tag",options:[{label:"\u5168\u90E8",value:0},{label:"\u7C7B\u76EE2",value:2},{label:"\u7C7B\u76EE3",value:3},{label:"\u7C7B\u76EE4",value:4},{label:"\u7C7B\u76EE5",value:5}]},{label:"owner",key:"owner",type:"input"}]);z(()=>{t()});function t(){return w(this,null,function*(){const{pageSize:s,current:i}=c;n.value=!0;const{code:h,data:r}=yield y.common.getPageList({pageSize:s,page:i}).catch(()=>{n.value=!1});n.value=!1,h===200&&(l.value=r.rows,c.total=r.total)})}function _(){p(),t()}function N({id:s}){O.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>w(this,null,function*(){n.value=!0;const{code:i}=yield y.common.deleteData({id:s}).catch(()=>{n.value=!1});i===200?(T.success("\u5220\u9664\u6210\u529F"),yield t()):n.value=!1})})}function P({current:s,pageSize:i}){c.current=s,c.pageSize=i,t()}return(s,i)=>{const h=o("x-filter"),r=o("a-card"),v=o("x-action-button"),S=o("icon-down-outlined"),b=o("a-menu-item"),V=o("a-menu"),B=o("a-dropdown"),F=o("a-table");return x(),C(D,null,[e(r,{bordered:!1},{default:a(()=>[e(h,{"data-source":d.value,"label-width":100,"model-value":m(g),onChange:_},null,8,["data-source","model-value"])]),_:1}),e(r,{bordered:!1,class:"mt-8-2"},{default:a(()=>[e(F,{columns:f,pagination:m(c),"data-source":m(l),loading:m(n),"row-key":"id",onChange:P},{bodyCell:a(({column:I,record:M,index:R})=>[I.key==="action"?(x(),C(D,{key:0},[e(v,null,{default:a(()=>[q]),_:1}),e(v,{onClick:U=>N(M)},{default:a(()=>[A]),_:2},1032,["onClick"]),e(v,{tag:"span"},{default:a(()=>[e(B,{trigger:["click"]},{overlay:a(()=>[e(V,null,{default:a(()=>[e(b,null,{default:a(()=>[H]),_:1}),e(b,null,{default:a(()=>[J]),_:1}),e(b,null,{default:a(()=>[K]),_:1})]),_:1})]),default:a(()=>[E("a",null,[G,e(S)])]),_:1})]),_:1})],64)):L("",!0)]),_:1},8,["pagination","data-source","loading"])]),_:1})],64)}}});export{te as default};
