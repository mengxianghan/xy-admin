var k=(g,u,s)=>new Promise((a,d)=>{var r=e=>{try{t(s.next(e))}catch(i){d(i)}},_=e=>{try{t(s.throw(e))}catch(i){d(i)}},t=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,_);t((s=s.apply(g,u)).next())});import{r as C,o as N,E as x,h as l,i as v,d as y,e as n,w as o,j as w,F as h,k as c,v as P,x as $,M as V,n as j}from"./index.7b6fce2d.js";import{u as B}from"./usePagination.ee26acc1.js";import F from"./Edit.4129014f.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";import"./useModal.b84de592.js";import"./useForm.98a74fe7.js";const L=c(" \u65B0\u5EFA\u89D2\u8272 "),O=c("\u67E5\u770B"),S=c("\u7F16\u8F91"),T=c("\u5220\u9664"),U={name:"systemRole"},W=Object.assign(U,{setup(g){const u=C([{title:"#",key:"no",width:60,align:"center"},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u522B\u540D",dataIndex:"alias"},{title:"\u6392\u5E8F",dataIndex:"sort",width:80},{title:"\u64CD\u4F5C",key:"action",width:160}]),{list:s,loading:a}=B(),d=C();N(()=>{r()});function r(){return k(this,null,function*(){a.value=!0;const{code:t,data:e}=yield x.system.getUserRoleList().catch(()=>{a.value=!1});if(a.value=!1,t===200){const{rows:i}=e;s.value=i}})}function _({id:t}){V.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>k(this,null,function*(){a.value=!0;const{code:e}=yield x.common.deleteData({id:t}).catch(()=>{a.value=!1});e===200?(j.success("\u5220\u9664\u6210\u529F"),yield r()):a.value=!1})})}return(t,e)=>{const i=l("icon-plus-outlined"),R=l("a-button"),D=l("x-action-bar"),f=l("x-action-button"),E=l("a-table"),I=l("a-card");return v(),y(h,null,[n(I,{bordered:!1},{default:o(()=>[n(D,{class:"mb-8-2"},{default:o(()=>[n(R,{type:"primary",onClick:e[0]||(e[0]=m=>t.$refs.editRef.handleCreate())},{icon:o(()=>[n(i)]),default:o(()=>[L]),_:1})]),_:1}),n(E,{columns:u.value,"data-source":w(s),loading:w(a),pagination:!1,"expand-icon-column-index":1},{bodyCell:o(({column:m,record:p,index:M})=>[m.key==="no"?(v(),y(h,{key:0},[c(P(M+1),1)],64)):$("",!0),m.key==="action"?(v(),y(h,{key:1},[n(f,{onClick:b=>t.$refs.editRef.handlePreview(p)},{default:o(()=>[O]),_:2},1032,["onClick"]),n(f,{onClick:b=>t.$refs.editRef.handleEdit(p)},{default:o(()=>[S]),_:2},1032,["onClick"]),n(f,{onClick:b=>_(p)},{default:o(()=>[T]),_:2},1032,["onClick"])],64)):$("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),n(F,{ref_key:"editRef",ref:d},null,512)],64)}}});export{W as default};
