var k=(i,l,e)=>new Promise((o,u)=>{var f=t=>{try{n(e.next(t))}catch(d){u(d)}},c=t=>{try{n(e.throw(t))}catch(d){u(d)}},n=t=>t.done?o(t.value):Promise.resolve(t.value).then(f,c);n((e=e.apply(i,l)).next())});import{_ as E,r as C,o as I,D as b,h as r,i as g,d as v,e as a,w as s,j as m,F as y,s as L,v as h,M,m as N}from"./index.15d75692.js";import{u as P}from"./usePagination.33b21ff5.js";import V from"./Edit.23fbb65c.js";import"./tinymce.b4091e4a.js";import"./echarts.cbe68697.js";import"./useModal.a8ea85e1.js";import"./useForm.25159ea8.js";const B={name:"systemRole",components:{Edit:V},setup(){const i=C([{title:"#",key:"no",width:60,align:"center"},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u522B\u540D",dataIndex:"alias"},{title:"\u6392\u5E8F",dataIndex:"sort",width:80},{title:"\u64CD\u4F5C",key:"action",width:160}]),{list:l,loading:e}=P(),o=C();I(()=>{u()});function u(){return k(this,null,function*(){e.value=!0;const{code:c,data:n}=yield b.system.getUserRoleList().catch(()=>{e.value=!1});if(e.value=!1,c===200){const{rows:t}=n;l.value=t}})}function f({id:c}){M.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>k(this,null,function*(){e.value=!0;const{code:n}=yield b.common.deleteData({id:c}).catch(()=>{e.value=!1});n===200?(N.success("\u5220\u9664\u6210\u529F"),yield getPageList()):e.value=!1})})}return{columns:i,list:l,loading:e,editRef:o,handleDelete:f}}};function F(i,l,e,o,u,f){const c=r("icon-plus-outlined"),n=r("a-button"),t=r("x-action-bar"),d=r("x-action-button"),w=r("a-table"),R=r("a-card"),$=r("edit");return g(),v(y,null,[a(R,{bordered:!1},{default:s(()=>[a(t,{class:"mb-8-2"},{default:s(()=>[a(n,{type:"primary",onClick:l[0]||(l[0]=_=>i.$refs.editRef.handleCreate())},{icon:s(()=>[a(c)]),default:s(()=>[m(" \u65B0\u5EFA\u89D2\u8272 ")]),_:1})]),_:1}),a(w,{columns:o.columns,"data-source":o.list,loading:o.loading,pagination:!1,"expand-icon-column-index":1},{bodyCell:s(({column:_,record:p,index:D})=>[_.key==="no"?(g(),v(y,{key:0},[m(L(D+1),1)],64)):h("",!0),_.key==="action"?(g(),v(y,{key:1},[a(d,{onClick:x=>i.$refs.editRef.handlePreview(p)},{default:s(()=>[m("\u67E5\u770B")]),_:2},1032,["onClick"]),a(d,{onClick:x=>i.$refs.editRef.handleEdit(p)},{default:s(()=>[m("\u7F16\u8F91")]),_:2},1032,["onClick"]),a(d,{onClick:x=>o.handleDelete(p)},{default:s(()=>[m("\u5220\u9664")]),_:2},1032,["onClick"])],64)):h("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),a($,{ref:"editRef"},null,512)],64)}const G=E(B,[["render",F]]);export{G as default};
