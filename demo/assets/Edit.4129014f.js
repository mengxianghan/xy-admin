var T=Object.defineProperty;var C=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var q=(o,l,e)=>l in o?T(o,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[l]=e,U=(o,l)=>{for(var e in l||(l={}))V.call(l,e)&&q(o,e,l[e]);if(C)for(var e of C(l))z.call(l,e)&&q(o,e,l[e]);return o};var E=(o,l,e)=>new Promise((b,f)=>{var g=s=>{try{u(e.next(s))}catch(a){f(a)}},h=s=>{try{u(e.throw(s))}catch(a){f(a)}},u=s=>s.done?b(s.value):Promise.resolve(s.value).then(g,h);u((e=e.apply(o,l)).next())});import{r as F,h as v,i as G,s as H,w as _,e as i,j as t,y as L,E as I}from"./index.7b6fce2d.js";import{u as J}from"./useModal.b84de592.js";import{u as K}from"./useForm.98a74fe7.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const ee={__name:"Edit",emits:["ok"],setup(o,{expose:l,emit:e}){const{modal:b,showModal:f,hideModal:g,showLoading:h,hideLoading:u}=J(),{formRecord:s,formState:a,formRef:w,rules:y,resetForm:M}=K(),r=F(!1),k=F("\u53D6\u6D88");y.value={role:{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4E0A\u7EA7"},name:{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},alias:{required:!0,message:"\u8BF7\u8F93\u5165\u522B\u540D"},sort:{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F"}};function R(){f({type:"create",title:"\u65B0\u5EFA\u89D2\u8272"})}function B(d){f({type:"edit",title:"\u7F16\u8F91\u89D2\u8272"}),a.value=L(d),s.value=d}function D(d){f({type:"preview",title:"\u67E5\u770B\u89D2\u8272"}),a.value=L(d),r.value=!0,k.value="\u5173\u95ED"}function N(){w.value.validateFields().then(d=>E(this,null,function*(){var m;h();const n=U({id:(m=a.value)==null?void 0:m.id},d);let p=null;p=yield I.common.saveData(n).catch(()=>{u()}),u(),(p==null?void 0:p.code)===200&&(g(),e("ok"))})).catch(()=>{u()})}function O(){g()}function j(){M(),r.value=!1,k.value="\u53D6\u6D88",u()}return l({handleCreate:R,handleEdit:B,handlePreview:D}),(d,n)=>{const p=v("a-cascader"),m=v("a-form-item"),x=v("a-input"),A=v("a-input-number"),P=v("a-form"),S=v("a-modal");return G(),H(S,{visible:t(b).visible,title:t(b).title,width:480,"confirm-loading":t(b).confirmLoading,"after-close":j,"ok-button-props":{style:{display:r.value?"none":""}},"cancel-text":k.value,onOk:N,onCancel:O},{default:_(()=>[i(P,{ref_key:"formRef",ref:w,model:t(a),rules:t(y),"label-col":{style:{width:"90px"}}},{default:_(()=>[i(m,{label:"\u6240\u5C5E\u4E0A\u7EA7",name:"role"},{default:_(()=>[i(p,{value:t(a).role,"onUpdate:value":n[0]||(n[0]=c=>t(a).role=c),disabled:r.value},null,8,["value","disabled"])]),_:1}),i(m,{label:"\u540D\u79F0",name:"name"},{default:_(()=>[i(x,{value:t(a).name,"onUpdate:value":n[1]||(n[1]=c=>t(a).name=c),disabled:r.value},null,8,["value","disabled"])]),_:1}),i(m,{label:"\u522B\u540D",name:"userName"},{default:_(()=>[i(x,{value:t(a).alias,"onUpdate:value":n[2]||(n[2]=c=>t(a).alias=c),disabled:r.value},null,8,["value","disabled"])]),_:1}),i(m,{label:"\u6392\u5E8F",name:"sort"},{default:_(()=>[i(A,{value:t(a).sort,"onUpdate:value":n[3]||(n[3]=c=>t(a).sort=c),disabled:r.value,min:1,precision:0},null,8,["value","disabled"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading","ok-button-props","cancel-text"])}}};export{ee as default};
