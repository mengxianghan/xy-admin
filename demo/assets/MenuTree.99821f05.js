var y=(b,p,n)=>new Promise((a,r)=>{var l=t=>{try{o(n.next(t))}catch(d){r(d)}},m=t=>{try{o(n.throw(t))}catch(d){r(d)}},o=t=>t.done?a(t.value):Promise.resolve(t.value).then(l,m);o((n=n.apply(b,p)).next())});import{_ as M,r as _,q as z,s as C,h as e,K as D,p as N,o as f,j as u,w as x,e as v,x as c,d as k,i as w,y as h,I as S,z as B,M as O,m as T}from"./index.d310c45b.js";import{u as V}from"./usePagination.209fa131.js";import"./tinymce.44d39310.js";import"./echarts.8bcd3921.js";const K={name:"MenuTree",emits:["select","ready"],setup(b,{emit:p}){const{list:n,loading:a}=V(),r=_([]),l=_("");z(()=>{m()});function m(){return y(this,null,function*(){a.value=!0;const{code:d,data:g}=yield C.system.getNewMenuList().catch(()=>{a.value=!1});if(a.value=!1,d===200){const{rows:s}=g;n.value=s,p("ready",s)}})}function o(d,{node:g}){!d.length||(r.value=d,p("select",g))}function t({id:d}){O.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>y(this,null,function*(){T.info("\u70B9\u51FB\u4E86\u5220\u9664")})})}return{list:n,loading:a,selectedKeys:r,keyword:l,handleSelect:o,handleDelete:t}}},I=w(" \u65B0\u5EFA\u83DC\u5355 "),L={class:"tree-row"},q={class:"tree-row__name"},E={key:0},P={class:"color-error"},U={key:1};function A(b,p,n,a,r,l){const m=e("a-input-search"),o=e("icon-plus-outlined"),t=e("icon-delete-outlined"),d=e("a-space"),g=e("a-tree"),s=e("a-card"),j=D("loading");return N((f(),u(s,{type:"flex"},{title:x(()=>[v(m,{value:a.keyword,"onUpdate:value":p[0]||(p[0]=i=>a.keyword=i),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22"},null,8,["value"])]),actions:x(()=>[c("div",null,[v(o),I])]),default:x(()=>[a.loading?B("",!0):(f(),u(g,{key:0,"selected-keys":a.selectedKeys,"tree-data":a.list,"field-names":{title:"name",children:"children",key:"key"},"default-expand-all":"","block-node":"",onSelect:a.handleSelect},{title:x(i=>[c("div",L,[c("div",q,[i.name.indexOf(a.keyword)>-1?(f(),k("span",E,[w(h(i.name.substr(0,i.name.indexOf(a.keyword)))+" ",1),c("span",P,h(a.keyword),1),w(" "+h(i.name.substr(i.name.indexOf(a.keyword)+a.keyword.length)),1)])):(f(),k("span",U,h(i.name),1))]),v(d,{class:"tree-row__actions",onClick:p[1]||(p[1]=S(()=>{},["stop"]))},{default:x(()=>[v(o),v(t,{onClick:F=>a.handleDelete(i)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["selected-keys","tree-data","onSelect"]))]),_:1})),[[j,a.loading]])}var W=M(K,[["render",A],["__scopeId","data-v-d76ae534"]]);export{W as default};
