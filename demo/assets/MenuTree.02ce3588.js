var h=(v,o,s)=>new Promise((e,c)=>{var m=t=>{try{l(s.next(t))}catch(n){c(n)}},d=t=>{try{l(s.throw(t))}catch(n){c(n)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(m,d);l((s=s.apply(v,o)).next())});import{_ as D,r as g,o as B,D as N,h as i,K as S,B as O,i as f,l as x,w as _,e as u,k as y,d as M,j as w,p as k,I as T,q as V,M as b,m as K}from"./index.a8948c02.js";import{u as I}from"./usePagination.27a1eb36.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const L={name:"MenuTree",emits:["select","ready"],setup(v,{emit:o}){const{list:s,loading:e}=I(),c=g([]),m=g("");B(()=>{d()});function d(){return h(this,null,function*(){e.value=!0;const{code:n,data:r}=yield N.system.getNewMenuList().catch(()=>{e.value=!1});if(e.value=!1,n===200){const{rows:p}=r;s.value=p,o("ready",p)}})}function l(n,{node:r}){!n.length||(c.value=n,o("select",r))}function t({id:n}){b.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>h(this,null,function*(){K.info("\u70B9\u51FB\u4E86\u5220\u9664")})})}return{list:s,loading:e,selectedKeys:c,keyword:m,handleSelect:l,handleDelete:t}}},j=w(" \u65B0\u5EFA\u83DC\u5355 "),q={class:"tree-row"},E={class:"tree-row__name"},P={key:0},U={class:"color-error"},z={key:1};function A(v,o,s,e,c,m){const d=i("a-input-search"),l=i("icon-plus-outlined"),t=i("icon-delete-outlined"),n=i("a-space"),r=i("a-tree"),p=i("a-card"),C=S("loading");return O((f(),x(p,{type:"flex"},{title:_(()=>[u(d,{value:e.keyword,"onUpdate:value":o[0]||(o[0]=a=>e.keyword=a),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22"},null,8,["value"])]),actions:_(()=>[y("div",null,[u(l),j])]),default:_(()=>[e.loading?V("",!0):(f(),x(r,{key:0,"selected-keys":e.selectedKeys,"tree-data":e.list,"field-names":{title:"name",children:"children",key:"key"},"default-expand-all":"","block-node":"",onSelect:e.handleSelect},{title:_(a=>[y("div",q,[y("div",E,[a.name.indexOf(e.keyword)>-1?(f(),M("span",P,[w(k(a.name.substr(0,a.name.indexOf(e.keyword)))+" ",1),y("span",U,k(e.keyword),1),w(" "+k(a.name.substr(a.name.indexOf(e.keyword)+e.keyword.length)),1)])):(f(),M("span",z,k(a.name),1))]),u(n,{class:"tree-row__actions",onClick:o[1]||(o[1]=T(()=>{},["stop"]))},{default:_(()=>[u(l),u(t,{onClick:F=>e.handleDelete(a)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["selected-keys","tree-data","onSelect"]))]),_:1})),[[C,e.loading]])}const W=D(L,[["render",A],["__scopeId","data-v-887aa493"]]);export{W as default};
