var w=(l,u,n)=>new Promise((o,m)=>{var y=s=>{try{c(n.next(s))}catch(r){m(r)}},d=s=>{try{c(n.throw(s))}catch(r){m(r)}},c=s=>s.done?o(s.value):Promise.resolve(s.value).then(y,d);c((n=n.apply(l,u)).next())});import{J as F,_ as L,r as E,o as j,D,h as a,i as p,d as g,e as t,w as e,F as h,j as i,p as b,q as f,l as M,k as q,M as J,m as O}from"./index.a8948c02.js";import{u as P}from"./usePagination.27a1eb36.js";import S from"./Edit.11679ad4.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";import"./useModal.97c00550.js";import"./useForm.049bdf41.js";const z=new F([{key:"menu",value:"menu",desc:"\u83DC\u5355"},{key:"button",value:"button",desc:"\u6309\u94AE"}]),A={name:"systemMenu",components:{Edit:S},setup(){const l=E([{title:"#",key:"no",width:60,align:"center"},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u7C7B\u578B",dataIndex:"type",key:"type",width:120},{title:"\u6392\u5E8F",dataIndex:"sort",width:80},{title:"\u64CD\u4F5C",key:"action",width:240}]),{list:u,loading:n}=P(),o=E();j(()=>{m()});function m(){return w(this,null,function*(){n.value=!0;const{code:d,data:c}=yield D.system.getMenuList().catch(()=>{n.value=!1});if(n.value=!1,d===200){const{rows:s}=c;u.value=s}})}function y({id:d}){J.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>w(this,null,function*(){n.value=!0;const{code:c}=yield D.common.deleteData({id:d}).catch(()=>{n.value=!1});c===200?(O.success("\u5220\u9664\u6210\u529F"),yield m()):n.value=!1})})}return{menuTypeEnum:z,columns:l,list:u,loading:n,editRef:o,handleDelete:y}}},G=i(" \u65B0\u5EFA\u83DC\u5355 "),H=i("\u65B0\u5EFA\u4E0B\u7EA7"),K=i("\u7F16\u8F91"),Q=i(" \u66F4\u591A "),U=i("\u5220\u9664"),W=i("\u514B\u9686");function X(l,u,n,o,m,y){const d=a("icon-plus-outlined"),c=a("a-button"),s=a("x-action-bar"),r=a("a-tag"),v=a("x-action-button"),T=a("icon-down-outlined"),x=a("a-menu-item"),R=a("a-menu"),B=a("a-dropdown"),N=a("a-table"),V=a("a-card"),I=a("edit");return p(),g(h,null,[t(V,null,{default:e(()=>[t(s,{class:"mb-8-2"},{default:e(()=>[t(c,{type:"primary",onClick:u[0]||(u[0]=k=>l.$refs.editRef.handleCreate())},{icon:e(()=>[t(d)]),default:e(()=>[G]),_:1})]),_:1}),t(N,{columns:o.columns,"data-source":o.list,loading:o.loading,pagination:!1,"expand-icon-column-index":1},{bodyCell:e(({column:k,record:_,index:$})=>[k.key==="no"?(p(),g(h,{key:0},[i(b($+1),1)],64)):f("",!0),k.key==="type"?(p(),g(h,{key:1},[o.menuTypeEnum.is("menu",_.type)?(p(),M(r,{key:0,color:"processing"},{default:e(()=>[i(b(o.menuTypeEnum.getDesc(_.type)),1)]),_:2},1024)):f("",!0),o.menuTypeEnum.is("button",_.type)?(p(),M(r,{key:1,color:"success"},{default:e(()=>[i(b(o.menuTypeEnum.getDesc(_.type)),1)]),_:2},1024)):f("",!0)],64)):f("",!0),k.key==="action"?(p(),g(h,{key:2},[t(v,{onClick:C=>l.$refs.editRef.handleEdit(_)},{default:e(()=>[H]),_:2},1032,["onClick"]),t(v,{onClick:C=>l.$refs.editRef.handleEdit(_)},{default:e(()=>[K]),_:2},1032,["onClick"]),t(v,{tag:"span"},{default:e(()=>[t(B,{trigger:["click"]},{overlay:e(()=>[t(R,null,{default:e(()=>[t(x,{onClick:C=>o.handleDelete(_)},{default:e(()=>[U]),_:2},1032,["onClick"]),t(x,null,{default:e(()=>[W]),_:1})]),_:2},1024)]),default:e(()=>[q("a",null,[Q,t(T)])]),_:2},1024)]),_:2},1024)],64)):f("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),t(I,{ref:"editRef"},null,512)],64)}const ce=L(A,[["render",X]]);export{ce as default};
