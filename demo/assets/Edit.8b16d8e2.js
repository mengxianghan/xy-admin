var O=Object.defineProperty;var y=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var S=(l,e,o)=>e in l?O(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o,w=(l,e)=>{for(var o in e||(e={}))U.call(e,o)&&S(l,o,e[o]);if(y)for(var o of y(e))D.call(e,o)&&S(l,o,e[o]);return l};var C=(l,e,o)=>new Promise((a,f)=>{var v=t=>{try{n(o.next(t))}catch(d){f(d)}},i=t=>{try{n(o.throw(t))}catch(d){f(d)}},n=t=>t.done?a(t.value):Promise.resolve(t.value).then(v,i);n((o=o.apply(l,e)).next())});import{u as E}from"./useModal.a8ea85e1.js";import{u as F}from"./useForm.25159ea8.js";import{_ as L,h as c,i as M,q as R,w as u,e as m,x as A,D as B}from"./index.15d75692.js";import"./tinymce.b4091e4a.js";import"./echarts.cbe68697.js";const N={name:"Edit",emits:["ok"],setup(l,{emit:e}){const{modal:o,showModal:a,hideModal:f,showLoading:v,hideLoading:i}=E(),{formRef:n,rules:t,formRecord:d,formState:s,resetForm:h}=F();t.value={type:{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5206\u7C7B"},name:{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},keyValue:{required:!0,message:"\u8BF7\u8F93\u5165\u952E\u503C"}},s.value={valid:!0};function r(){a({title:"\u65B0\u5EFA\u9879"})}function b(_){a({title:"\u7F16\u8F91\u9879"}),s.value=A(_),d.value=_}function g(){n.value.validateFields().then(_=>C(this,null,function*(){var k;v();const q=w({id:(k=s.value)==null?void 0:k.id},_);let p=null;p=yield B.common.saveData(q).catch(()=>{i()}),i(),(p==null?void 0:p.code)===200&&(f(),e("ok"))})).catch(_=>{i()})}function x(){f()}function V(){h()}return{modal:o,formRef:n,rules:t,formState:s,handleCreate:r,handleEdit:b,handleOk:g,handleCancel:x,onAfterClose:V}}};function j(l,e,o,a,f,v){const i=c("a-tree-select"),n=c("a-form-item"),t=c("a-input"),d=c("a-switch"),s=c("a-form"),h=c("a-modal");return M(),R(h,{visible:a.modal.visible,title:a.modal.title,"confirm-loading":a.modal.confirmLoading,"after-close":a.onAfterClose,width:480,onOk:a.handleOk,onCancel:a.handleCancel},{default:u(()=>[m(s,{ref:"formRef",model:a.formState,rules:a.rules,"scroll-to-first-error":"","label-col":{style:{width:"100px"}}},{default:u(()=>[m(n,{label:"\u6240\u5C5E\u5206\u7C7B",name:"type"},{default:u(()=>[m(i,{value:a.formState.type,"onUpdate:value":e[0]||(e[0]=r=>a.formState.type=r)},null,8,["value"])]),_:1}),m(n,{label:"\u540D\u79F0",name:"name"},{default:u(()=>[m(t,{value:a.formState.name,"onUpdate:value":e[1]||(e[1]=r=>a.formState.name=r)},null,8,["value"])]),_:1}),m(n,{label:"\u952E\u503C",name:"keyValue"},{default:u(()=>[m(t,{value:a.formState.keyValue,"onUpdate:value":e[2]||(e[2]=r=>a.formState.keyValue=r)},null,8,["value"])]),_:1}),m(n,{label:"\u662F\u5426\u6709\u6548",name:"valid"},{default:u(()=>[m(d,{checked:a.formState.valid,"onUpdate:checked":e[3]||(e[3]=r=>a.formState.valid=r)},null,8,["checked"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading","after-close","onOk","onCancel"])}const P=L(N,[["render",j]]);export{P as default};
