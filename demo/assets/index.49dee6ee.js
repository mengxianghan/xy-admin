var b=(g,u,o)=>new Promise((e,_)=>{var h=a=>{try{l(o.next(a))}catch(i){_(i)}},m=a=>{try{l(o.throw(a))}catch(i){_(i)}},l=a=>a.done?e(a.value):Promise.resolve(a.value).then(h,m);l((o=o.apply(g,u)).next())});import{_ as S,r as k,o as F,h as c,i as x,d as y,e as t,w as n,F as C,k as N,q as P,D,M as V,m as B,j as r}from"./index.a8948c02.js";import{u as I}from"./usePagination.27a1eb36.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const M={name:"listSearch",setup(){const g=[{title:"ID",dataIndex:"id",width:64,align:"center"},{title:"\u6807\u9898",dataIndex:"title"},{title:"\u64CD\u4F5C",key:"action",width:180}],{list:u,pagination:o,loading:e,resetPagination:_,searchForm:h}=I(),m=k(),l=k([{label:"\u6240\u5C5E\u7C7B\u76EE",key:"type",type:"tag",options:[{label:"\u5168\u90E8",value:0},{label:"\u7C7B\u76EE2",value:2},{label:"\u7C7B\u76EE3",value:3},{label:"\u7C7B\u76EE4",value:4},{label:"\u7C7B\u76EE5",value:5}]},{label:"owner",key:"owner",type:"input"}]);function a(){return b(this,null,function*(){const{pageSize:s,current:d}=o;e.value=!0;const{code:w,data:p}=yield D.common.getPageList({pageSize:s,page:d}).catch(()=>{e.value=!1});e.value=!1,w===200&&(u.value=p.rows,o.total=p.total)})}function i(){_(),a()}function f({id:s}){V.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>b(this,null,function*(){e.value=!0;const{code:d}=yield D.common.deleteData({id:s}).catch(()=>{e.value=!1});d===200?(B.success("\u5220\u9664\u6210\u529F"),yield a()):e.value=!1})})}function v({current:s,pageSize:d}){o.current=s,o.pageSize=d,a()}return F(()=>{a()}),{editRef:m,filterData:l,columns:g,loading:e,list:u,searchForm:h,pagination:o,handleSearch:i,handleDelete:f,onTableChange:v}}},T=r("\u7F16\u8F91"),z=r(" \u5220\u9664 "),L=r(" \u66F4\u591A "),j=r("\u83DC\u5355 1"),q=r("\u83DC\u5355 2"),E=r("\u83DC\u5355 3");function O(g,u,o,e,_,h){const m=c("x-filter"),l=c("a-card"),a=c("x-action-button"),i=c("icon-down-outlined"),f=c("a-menu-item"),v=c("a-menu"),s=c("a-dropdown"),d=c("a-table");return x(),y(C,null,[t(l,null,{default:n(()=>[t(m,{"data-source":e.filterData,"label-width":100,"model-value":e.searchForm,onChange:e.handleSearch},null,8,["data-source","model-value","onChange"])]),_:1}),t(l,{class:"mt-8-2"},{default:n(()=>[t(d,{columns:e.columns,pagination:e.pagination,"data-source":e.list,loading:e.loading,"row-key":"id",onChange:e.onTableChange},{bodyCell:n(({column:w,record:p,index:R})=>[w.key==="action"?(x(),y(C,{key:0},[t(a,null,{default:n(()=>[T]),_:1}),t(a,{onClick:A=>e.handleDelete(p)},{default:n(()=>[z]),_:2},1032,["onClick"]),t(a,{tag:"span"},{default:n(()=>[t(s,{trigger:["click"]},{overlay:n(()=>[t(v,null,{default:n(()=>[t(f,null,{default:n(()=>[j]),_:1}),t(f,null,{default:n(()=>[q]),_:1}),t(f,null,{default:n(()=>[E]),_:1})]),_:1})]),default:n(()=>[N("a",null,[L,t(i)])]),_:1})]),_:1})],64)):P("",!0)]),_:1},8,["columns","pagination","data-source","loading","onChange"])]),_:1})],64)}const U=S(M,[["render",O]]);export{U as default};
