var w=(x,h,i)=>new Promise((s,r)=>{var p=t=>{try{o(i.next(t))}catch(l){r(l)}},v=t=>{try{o(i.throw(t))}catch(l){r(l)}},o=t=>t.done?s(t.value):Promise.resolve(t.value).then(p,v);o((i=i.apply(x,h)).next())});import{K,r as D,o as P,E as R,h as a,i as _,d as y,e as n,w as e,j as d,F as k,k as c,v as C,x as m,s as B,m as S,M as q,n as z}from"./index.7b6fce2d.js";import{u as A}from"./usePagination.ee26acc1.js";import G from"./Edit.337feeea.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";import"./useModal.b84de592.js";import"./useForm.98a74fe7.js";const g=new K([{key:"menu",value:"menu",desc:"\u83DC\u5355"},{key:"button",value:"button",desc:"\u6309\u94AE"}]),H=c(" \u65B0\u5EFA\u83DC\u5355 "),J=c("\u65B0\u5EFA\u4E0B\u7EA7"),Q=c("\u7F16\u8F91"),U=c(" \u66F4\u591A "),W=c("\u5220\u9664"),X=c("\u514B\u9686"),Y={name:"systemMenu"},ie=Object.assign(Y,{setup(x){const h=D([{title:"#",key:"no",width:60,align:"center"},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u7C7B\u578B",dataIndex:"type",key:"type",width:120},{title:"\u6392\u5E8F",dataIndex:"sort",width:80},{title:"\u64CD\u4F5C",key:"action",width:240}]),{list:i,loading:s}=A(),r=D();P(()=>{p()});function p(){return w(this,null,function*(){s.value=!0;const{code:o,data:t}=yield R.system.getMenuList().catch(()=>{s.value=!1});if(s.value=!1,o===200){const{rows:l}=t;i.value=l}})}function v({id:o}){q.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>w(this,null,function*(){s.value=!0;const{code:t}=yield R.common.deleteData({id:o}).catch(()=>{s.value=!1});t===200?(z.success("\u5220\u9664\u6210\u529F"),yield p()):s.value=!1})})}return(o,t)=>{const l=a("icon-plus-outlined"),N=a("a-button"),V=a("x-action-bar"),$=a("a-tag"),b=a("x-action-button"),I=a("icon-down-outlined"),E=a("a-menu-item"),j=a("a-menu"),F=a("a-dropdown"),L=a("a-table"),O=a("a-card");return _(),y(k,null,[n(O,{bordered:!1},{default:e(()=>[n(V,{class:"mb-8-2"},{default:e(()=>[n(N,{type:"primary",onClick:t[0]||(t[0]=f=>o.$refs.editRef.handleCreate())},{icon:e(()=>[n(l)]),default:e(()=>[H]),_:1})]),_:1}),n(L,{columns:h.value,"data-source":d(i),loading:d(s),pagination:!1,"expand-icon-column-index":1},{bodyCell:e(({column:f,record:u,index:T})=>[f.key==="no"?(_(),y(k,{key:0},[c(C(T+1),1)],64)):m("",!0),f.key==="type"?(_(),y(k,{key:1},[d(g).is("menu",u.type)?(_(),B($,{key:0,color:"processing"},{default:e(()=>[c(C(d(g).getDesc(u.type)),1)]),_:2},1024)):m("",!0),d(g).is("button",u.type)?(_(),B($,{key:1,color:"success"},{default:e(()=>[c(C(d(g).getDesc(u.type)),1)]),_:2},1024)):m("",!0)],64)):m("",!0),f.key==="action"?(_(),y(k,{key:2},[n(b,{onClick:M=>o.$refs.editRef.handleEdit(u)},{default:e(()=>[J]),_:2},1032,["onClick"]),n(b,{onClick:M=>o.$refs.editRef.handleEdit(u)},{default:e(()=>[Q]),_:2},1032,["onClick"]),n(b,{tag:"span"},{default:e(()=>[n(F,{trigger:["click"]},{overlay:e(()=>[n(j,null,{default:e(()=>[n(E,{onClick:M=>v(u)},{default:e(()=>[W]),_:2},1032,["onClick"]),n(E,null,{default:e(()=>[X]),_:1})]),_:2},1024)]),default:e(()=>[S("a",null,[U,n(I)])]),_:2},1024)]),_:2},1024)],64)):m("",!0)]),_:1},8,["columns","data-source","loading"])]),_:1}),n(G,{ref_key:"editRef",ref:r},null,512)],64)}}});export{ie as default};
