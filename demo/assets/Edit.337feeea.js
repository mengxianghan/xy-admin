var T=Object.defineProperty;var F=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var q=(s,u,o)=>u in s?T(s,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[u]=o,E=(s,u)=>{for(var o in u||(u={}))z.call(u,o)&&q(s,o,u[o]);if(F)for(var o of F(u))G.call(u,o)&&q(s,o,u[o]);return s};var L=(s,u,o)=>new Promise((_,b)=>{var y=d=>{try{m(o.next(d))}catch(e){b(e)}},g=d=>{try{m(o.throw(d))}catch(e){b(e)}},m=d=>d.done?_(d.value):Promise.resolve(d.value).then(y,g);m((o=o.apply(s,u)).next())});import{r as B,h as v,i as M,s as H,w as r,e as t,j as a,d as I,F as J,x as K,y as P,E as Q}from"./index.7b6fce2d.js";import{u as W}from"./useModal.b84de592.js";import{u as X}from"./useForm.98a74fe7.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const ne={__name:"Edit",emits:["ok"],setup(s,{expose:u,emit:o}){const{modal:_,showModal:b,hideModal:y,showLoading:g,hideLoading:m}=W(),{formRecord:d,formState:e,formRef:k,rules:w,formLayout:Y,resetForm:R}=X(),x=B(!1),U=B("\u53D6\u6D88");w.value={role:{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4E0A\u7EA7"},name:{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},alias:{required:!0,message:"\u8BF7\u8F93\u5165\u522B\u540D"},sort:{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F"}};function h(){b({type:"create",title:"\u65B0\u5EFA\u83DC\u5355"})}function D(f){b({type:"edit",title:"\u7F16\u8F91\u83DC\u5355"}),e.value=P(f),d.value=f}function N(){k.value.validateFields().then(f=>L(this,null,function*(){var i;g();const l=E({id:(i=e.value)==null?void 0:i.id},f);let c=null;c=yield Q.common.saveData(l).catch(()=>{m()}),m(),(c==null?void 0:c.code)===200&&(y(),o("ok"))})).catch(f=>{m()})}function O(){y()}function V(){R(),x.value=!1,U.value="\u53D6\u6D88",m()}return u({handleCreate:h,handleEdit:D}),(f,l)=>{const c=v("a-tree-select"),i=v("a-form-item"),C=v("a-radio-group"),p=v("a-input"),j=v("a-switch"),A=v("a-form"),S=v("a-modal");return M(),H(S,{visible:a(_).visible,title:a(_).title,width:640,"confirm-loading":a(_).confirmLoading,"after-close":V,"ok-button-props":{style:{display:x.value?"none":""}},"cancel-text":U.value,onOk:N,onCancel:O},{default:r(()=>[t(A,{ref_key:"formRef",ref:k,model:a(e),rules:a(w),"label-col":{style:{width:"80px"}}},{default:r(()=>[t(i,{label:"\u6240\u5C5E\u4E0A\u7EA7"},{default:r(()=>[t(c,{value:a(e).parent_id,"onUpdate:value":l[0]||(l[0]=n=>a(e).parent_id=n),"tree-default-expand-all":""},null,8,["value"])]),_:1}),t(i,{label:"\u7C7B\u578B",name:"type"},{default:r(()=>[t(C,{value:a(e).type,"onUpdate:value":l[1]||(l[1]=n=>a(e).type=n),options:[{label:"\u83DC\u5355",value:"menu"},{label:"\u6309\u94AE",value:"button"}]},null,8,["value"])]),_:1}),t(i,{label:"\u540D\u79F0",name:"name"},{default:r(()=>[t(p,{value:a(e).name,"onUpdate:value":l[2]||(l[2]=n=>a(e).name=n)},null,8,["value"])]),_:1}),t(i,{label:"\u522B\u540D",name:"alias",extra:"\u7CFB\u7EDF\u552F\u4E00\u4E14\u4E0E\u5185\u7F6E\u7EC4\u4EF6\u540D\u4E00\u81F4\uFF0C\u5426\u5219\u5BFC\u81F4\u7F13\u5B58\u5931\u6548"},{default:r(()=>[t(p,{value:a(e).alias,"onUpdate:value":l[3]||(l[3]=n=>a(e).alias=n)},null,8,["value"])]),_:1}),a(e).type==="menu"?(M(),I(J,{key:0},[t(i,{label:"\u8DF3\u8F6C\u65B9\u5F0F",name:"type"},{default:r(()=>[t(C,{value:a(e).target,"onUpdate:value":l[4]||(l[4]=n=>a(e).target=n),options:[{label:"\u9ED8\u8BA4",value:1},{label:"iframe",value:2},{label:"\u5916\u90E8\u94FE\u63A5",value:3}]},null,8,["value"])]),_:1}),t(i,{label:"\u56FE\u6807",name:"icon"},{default:r(()=>[t(p,{value:a(e).icon,"onUpdate:value":l[5]||(l[5]=n=>a(e).icon=n)},null,8,["value"])]),_:1}),t(i,{label:"\u8DEF\u7531\u5730\u5740",name:"path"},{default:r(()=>[t(p,{value:a(e).path,"onUpdate:value":l[6]||(l[6]=n=>a(e).path=n)},null,8,["value"])]),_:1}),t(i,{label:"\u6A21\u677F",name:"tpl"},{default:r(()=>[t(p,{value:a(e).tpl,"onUpdate:value":l[7]||(l[7]=n=>a(e).tpl=n)},null,8,["value"])]),_:1}),t(i,{label:"\u89C6\u56FE\u5730\u5740",name:"view"},{default:r(()=>[t(p,{value:a(e).view,"onUpdate:value":l[8]||(l[8]=n=>a(e).view=n)},null,8,["value"])]),_:1}),t(i,{label:"\u83DC\u5355\u9AD8\u4EAE",name:"active",extra:"\u5B50\u8282\u70B9\u6216\u8BE6\u60C5\u9875\u9700\u8981\u9AD8\u4EAE\u7684\u4E0A\u7EA7\u83DC\u5355\u522B\u540D"},{default:r(()=>[t(p,{value:a(e).active,"onUpdate:value":l[9]||(l[9]=n=>a(e).active=n)},null,8,["value"])]),_:1}),t(i,{label:"\u9690\u85CF",name:"is_menu",extra:"\u4E0D\u663E\u793A\u5728\u5BFC\u822A\u4E2D\uFF0C\u4F46\u4F9D\u7136\u53EF\u4EE5\u8BBF\u95EE\uFF0C\u4F8B\u5982\u8BE6\u60C5\u9875"},{default:r(()=>[t(j,{checked:a(e).is_menu,"onUpdate:checked":l[10]||(l[10]=n=>a(e).is_menu=n)},null,8,["checked"])]),_:1})],64)):K("",!0)]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading","ok-button-props","cancel-text"])}}};export{ne as default};
