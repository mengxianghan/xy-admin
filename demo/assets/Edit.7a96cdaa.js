var O=Object.defineProperty;var b=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var g=(o,a,e)=>a in o?O(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,C=(o,a)=>{for(var e in a||(a={}))j.call(a,e)&&g(o,e,a[e]);if(b)for(var e of b(a))A.call(a,e)&&g(o,e,a[e]);return o};var V=(o,a,e)=>new Promise((v,k)=>{var h=n=>{try{s(e.next(n))}catch(d){k(d)}},y=n=>{try{s(e.throw(n))}catch(d){k(d)}},s=n=>n.done?v(n.value):Promise.resolve(n.value).then(h,y);s((e=e.apply(o,a)).next())});import{u as N}from"./useModal.b84de592.js";import{u as S}from"./useForm.98a74fe7.js";import{h as p,i as z,s as G,w as _,e as r,j as t,y as H,E as I}from"./index.7b6fce2d.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const X={__name:"Edit",emits:["ok"],setup(o,{expose:a,emit:e}){const{modal:v,showModal:k,hideModal:h,showLoading:y,hideLoading:s}=N(),{formRef:n,rules:d,formRecord:x,formState:l,resetForm:U}=S();d.value={type:{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5206\u7C7B"},name:{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},keyValue:{required:!0,message:"\u8BF7\u8F93\u5165\u952E\u503C"}},l.value={valid:!0};function q(){k({title:"\u65B0\u5EFA\u9879"})}function E(c){k({title:"\u7F16\u8F91\u9879"}),l.value=H(c),x.value=c}function F(){n.value.validateFields().then(c=>V(this,null,function*(){var u;y();const i=C({id:(u=l.value)==null?void 0:u.id},c);let f=null;f=yield I.common.saveData(i).catch(()=>{s()}),s(),(f==null?void 0:f.code)===200&&(h(),e("ok"))})).catch(c=>{s()})}function L(){h()}function M(){U()}return a({handleCreate:q,handleEdit:E}),(c,i)=>{const f=p("a-tree-select"),u=p("a-form-item"),w=p("a-input"),R=p("a-switch"),B=p("a-form"),D=p("a-modal");return z(),G(D,{visible:t(v).visible,title:t(v).title,"confirm-loading":t(v).confirmLoading,"after-close":M,width:480,onOk:F,onCancel:L},{default:_(()=>[r(B,{ref_key:"formRef",ref:n,model:t(l),rules:t(d),"scroll-to-first-error":"","label-col":{style:{width:"100px"}}},{default:_(()=>[r(u,{label:"\u6240\u5C5E\u5206\u7C7B",name:"type"},{default:_(()=>[r(f,{value:t(l).type,"onUpdate:value":i[0]||(i[0]=m=>t(l).type=m)},null,8,["value"])]),_:1}),r(u,{label:"\u540D\u79F0",name:"name"},{default:_(()=>[r(w,{value:t(l).name,"onUpdate:value":i[1]||(i[1]=m=>t(l).name=m)},null,8,["value"])]),_:1}),r(u,{label:"\u952E\u503C",name:"keyValue"},{default:_(()=>[r(w,{value:t(l).keyValue,"onUpdate:value":i[2]||(i[2]=m=>t(l).keyValue=m)},null,8,["value"])]),_:1}),r(u,{label:"\u662F\u5426\u6709\u6548",name:"valid"},{default:_(()=>[r(R,{checked:t(l).valid,"onUpdate:checked":i[3]||(i[3]=m=>t(l).valid=m)},null,8,["checked"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading"])}}};export{X as default};
