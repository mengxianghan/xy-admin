var h=($,c,o)=>new Promise((x,i)=>{var m=l=>{try{_(o.next(l))}catch(u){i(u)}},p=l=>{try{_(o.throw(l))}catch(u){i(u)}},_=l=>l.done?x(l.value):Promise.resolve(l.value).then(m,p);_((o=o.apply($,c)).next())});import{r as d,o as J,E as R,h as n,L as Q,i as k,d as P,e,w as t,C as W,s as U,j as B,x as E,F as M,k as f,M as X,n as Y}from"./index.7b6fce2d.js";import{u as Z}from"./usePagination.ee26acc1.js";import ee from"./Edit.6328b137.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";import"./useModal.b84de592.js";import"./useForm.98a74fe7.js";const te=f(" \u65B0\u5EFA\u7528\u6237 "),ae=f("\u641C\u7D22 "),ne=f("\u67E5\u770B"),oe=f("\u7F16\u8F91"),le=f("\u5220\u9664"),se={name:"systemUser"},ve=Object.assign(se,{setup($){const{loading:c,pagination:o,resetPagination:x}=Z(),i=d(!1),m=d([]),p=d(["0"]),_=d([{title:"ID",dataIndex:"id"},{title:"\u5934\u50CF",key:"avatar"},{title:"\u767B\u5F55\u5E10\u53F7",dataIndex:"userName"},{title:"\u59D3\u540D",dataIndex:"name"},{title:"\u6240\u5C5E\u89D2\u8272",dataIndex:"roleName"},{title:"\u52A0\u5165\u65F6\u95F4",dataIndex:"date"},{title:"\u64CD\u4F5C",key:"action",fixed:"right",width:160}]),l=d([]),u=d();J(()=>{S(),v()});function S(){return h(this,null,function*(){i.value=!0;const{code:a,data:s}=yield R.system.getUserRoleList().catch(()=>{i.value=!1});i.value=!1,a===200&&(m.value=[{name:"\u5168\u90E8",key:"0"},...s.rows])})}function v(){return h(this,null,function*(){c.value=!0;const{pageSize:a,current:s}=o,{code:b,data:g}=yield R.system.getUserPageList({pageSize:a,page:s}).catch(()=>{c.value=!1});if(c.value=!1,b===200){const{rows:r,total:C}=g;l.value=r,o.total=C}})}function V(a){!a.length||(p.value=a,x(),v())}function j({id:a}){X.confirm({title:"\u5220\u9664\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\uFF1F",onOk:()=>h(this,null,function*(){c.value=!0;const{code:s}=yield R.common.deleteData({id:a}).catch(()=>{c.value=!1});s===200?(Y.success("\u5220\u9664\u6210\u529F"),yield v()):c.value=!1})})}function z({current:a,pageSize:s}){o.current=a,o.pageSize=s,v()}return(a,s)=>{const b=n("a-tree"),g=n("a-card"),r=n("a-col"),C=n("icon-plus-outlined"),I=n("a-button"),F=n("a-input"),O=n("a-form-item"),D=n("a-row"),T=n("a-form"),K=n("x-search-bar"),q=n("x-action-bar"),A=n("a-avatar"),w=n("x-action-button"),G=n("a-table"),H=Q("loading");return k(),P(M,null,[e(D,{gutter:16,type:"flex",class:"hp-100"},{default:t(()=>[e(r,{flex:"0 0 240px"},{default:t(()=>[W((k(),U(g,{bordered:!1,type:"flex"},{default:t(()=>[e(b,{"selected-keys":p.value,"tree-data":m.value,"field-names":{title:"name",children:"children",key:"key"},"block-node":"",onSelect:V},null,8,["selected-keys","tree-data"])]),_:1})),[[H,i.value]])]),_:1}),e(r,{flex:"1"},{default:t(()=>[e(g,{bordered:!1,type:"flex"},{default:t(()=>[e(q,{class:"mb-8-2"},{extra:t(()=>[e(K,{"body-style":{padding:0}},{default:t(()=>[e(T,{layout:"inline"},{default:t(()=>[e(D,{gutter:12,type:"flex"},{default:t(()=>[e(r,null,{default:t(()=>[e(O,null,{default:t(()=>[e(F)]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(I,{type:"primary",ghost:""},{default:t(()=>[ae]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(I,{type:"primary",onClick:s[0]||(s[0]=L=>a.$refs.editRef.handleCreate())},{icon:t(()=>[e(C)]),default:t(()=>[te]),_:1})]),_:1}),e(G,{columns:_.value,"data-source":l.value,loading:B(c),pagination:B(o),onChange:z},{bodyCell:t(({column:L,record:y,index:ce})=>[L.key==="avatar"?(k(),U(A,{key:0,src:y.avatar},null,8,["src"])):E("",!0),L.key==="action"?(k(),P(M,{key:1},[e(w,{onClick:N=>a.$refs.editRef.handlePreview(y)},{default:t(()=>[ne]),_:2},1032,["onClick"]),e(w,{onClick:N=>a.$refs.editRef.handleEdit(y)},{default:t(()=>[oe]),_:2},1032,["onClick"]),e(w,{onClick:N=>j(y)},{default:t(()=>[le]),_:2},1032,["onClick"])],64)):E("",!0)]),_:1},8,["columns","data-source","loading","pagination"])]),_:1})]),_:1})]),_:1}),e(ee,{ref_key:"editRef",ref:u},null,512)],64)}}});export{ve as default};
