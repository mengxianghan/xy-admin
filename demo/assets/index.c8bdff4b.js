var k=Object.defineProperty;var S=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var R=(n,e,o)=>e in n?k(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,h=(n,e)=>{for(var o in e||(e={}))y.call(e,o)&&R(n,o,e[o]);if(S)for(var o of S(e))C.call(e,o)&&R(n,o,e[o]);return n};var x=(n,e,o)=>new Promise((t,d)=>{var p=a=>{try{l(o.next(a))}catch(r){d(r)}},m=a=>{try{l(o.throw(a))}catch(r){d(r)}},l=a=>a.done?t(a.value):Promise.resolve(a.value).then(p,m);l((o=o.apply(n,e)).next())});import{_ as b,u as U,a as q,b as z,r as E,c as I,d as L,e as i,w as u,f as A,g as B,m as F,n as M,t as N,h as c,o as P,M as V,i as O}from"./index.d310c45b.js";import{u as T}from"./useForm.adf1d994.js";import"./tinymce.44d39310.js";import"./echarts.8bcd3921.js";const X={setup(){const{formState:n,formRef:e,rules:o}=T(),t=U(),d=q(),p=z(),m=A(),l=B(),a="XYAdmin",r=E(!1),_=I(()=>{var s,g;return decodeURIComponent((g=(s=l.query)==null?void 0:s.redirect)!=null?g:"")});o.value={username:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}},n.value={username:"admin",password:"123456"};function v(){return x(this,null,function*(){e.value.validate().then(s=>x(this,null,function*(){r.value=!0;const{code:g}=yield d.login(h({},s)).catch(()=>{r.value=!1,F.error("\u767B\u5F55\u5931\u8D25")});r.value=!1,g===200&&(t.complete||(yield t.init()),w())}))})}function f(){const s=p.indexRouter;return s||V.warning({title:"\u7CFB\u7EDF\u63D0\u793A",content:"\u6CA1\u6709\u4EFB\u4F55\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",onOk:()=>{window.location.reload()}}),s}function w(){if(_.value)location.href=_.value;else{const s=f();if(!s)return;m.push(s)}M.success({message:"\u6B22\u8FCE",description:`${N()}\uFF0C\u6B22\u8FCE\u56DE\u6765`})}return{rules:o,formState:n,formRef:e,title:a,loading:r,handleLogin:v}}},Y=O("\u767B\u5F55 ");function j(n,e,o,t,d,p){const m=c("icon-user-outlined"),l=c("a-input"),a=c("a-form-item"),r=c("icon-lock-outlined"),_=c("a-button"),v=c("a-form");return P(),L("div",null,[i(v,{model:t.formState,rules:t.rules,ref:"formRef"},{default:u(()=>[i(a,{name:"username"},{default:u(()=>[i(l,{value:t.formState.username,"onUpdate:value":e[0]||(e[0]=f=>t.formState.username=f),size:"large",placeholder:"admin"},{prefix:u(()=>[i(m)]),_:1},8,["value"])]),_:1}),i(a,{name:"password"},{default:u(()=>[i(l,{value:t.formState.password,"onUpdate:value":e[1]||(e[1]=f=>t.formState.password=f),size:"large",type:"password",placeholder:"123456",onPressEnter:t.handleLogin},{prefix:u(()=>[i(r)]),_:1},8,["value","onPressEnter"])]),_:1}),i(a,null,{default:u(()=>[i(_,{type:"primary",size:"large",block:"",loading:t.loading,onClick:t.handleLogin},{default:u(()=>[Y]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"])])}var Q=b(X,[["render",j]]);export{Q as default};
