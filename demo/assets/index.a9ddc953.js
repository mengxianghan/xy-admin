var z=Object.defineProperty;var b=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var k=(s,e,a)=>e in s?z(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,w=(s,e)=>{for(var a in e||(e={}))q.call(e,a)&&k(s,a,e[a]);if(b)for(var a of b(e))U.call(e,a)&&k(s,a,e[a]);return s};var h=(s,e,a)=>new Promise((t,m)=>{var v=r=>{try{u(a.next(r))}catch(i){m(i)}},f=r=>{try{u(a.throw(r))}catch(i){m(i)}},u=r=>r.done?t(r.value):Promise.resolve(r.value).then(v,f);u((a=a.apply(s,e)).next())});import{_ as E,u as L,a as P,b as B,r as I,c as M,o as N,d as V,e as o,w as n,f as A,g as F,m as j,n as O,t as T,h as d,i as X,M as Y,j as y,k as R}from"./index.a8948c02.js";import{u as D}from"./useForm.049bdf41.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const G={setup(){const{formState:s,formRef:e,rules:a}=D(),t=L(),m=P(),v=B(),f=A(),u=F(),r="XYAdmin",i=I(!1),p=M(()=>{var l,_;return decodeURIComponent((_=(l=u.query)==null?void 0:l.redirect)!=null?_:"")});a.value={username:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}},N(()=>{m.logout()});function x(){return h(this,null,function*(){e.value.validate().then(l=>h(this,null,function*(){i.value=!0;const{code:_}=yield m.login(w({},l)).catch(()=>{i.value=!1,j.error("\u767B\u5F55\u5931\u8D25")});i.value=!1,_===200&&(t.complete||(yield t.init()),S())}))})}function g(){const l=v.indexRouter;return l||Y.warning({title:"\u7CFB\u7EDF\u63D0\u793A",content:"\u6CA1\u6709\u4EFB\u4F55\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458",onOk:()=>{window.location.reload()}}),l}function S(){if(p.value)location.href=p.value;else{const l=g();if(!l)return;f.push(l)}O.success({message:"\u6B22\u8FCE",description:`${T()}\uFF0C\u6B22\u8FCE\u56DE\u6765`})}return{rules:a,formState:s,formRef:e,title:r,loading:i,handleLogin:x}}},H=y("\u767B\u5F55 "),J=R("span",{class:"cursor-pointer"},"\u83B7\u53D6\u9A8C\u8BC1\u7801",-1),K=y("\u767B\u5F55 "),Q=R("div",{class:"color-secondary"},'\u626B\u7801\u540E\u70B9\u51FB"\u786E\u8BA4"\uFF0C\u5373\u53EF\u5B8C\u6210\u767B\u5F55',-1);function W(s,e,a,t,m,v){const f=d("icon-user-outlined"),u=d("a-input"),r=d("a-form-item"),i=d("icon-lock-outlined"),p=d("a-button"),x=d("a-form"),g=d("a-tab-pane"),S=d("icon-mobile-outlined"),l=d("x-qr-code"),_=d("a-divider"),C=d("a-tabs");return X(),V("div",null,[o(C,{centered:""},{default:n(()=>[o(g,{key:"account",tab:"\u8D26\u53F7\u767B\u5F55"},{default:n(()=>[o(x,{model:t.formState,rules:t.rules,ref:"formRef"},{default:n(()=>[o(r,{name:"username"},{default:n(()=>[o(u,{value:t.formState.username,"onUpdate:value":e[0]||(e[0]=c=>t.formState.username=c),size:"large",placeholder:"admin"},{prefix:n(()=>[o(f)]),_:1},8,["value"])]),_:1}),o(r,{name:"password"},{default:n(()=>[o(u,{value:t.formState.password,"onUpdate:value":e[1]||(e[1]=c=>t.formState.password=c),size:"large",type:"password",placeholder:"123456",onPressEnter:t.handleLogin},{prefix:n(()=>[o(i)]),_:1},8,["value","onPressEnter"])]),_:1}),o(r,null,{default:n(()=>[o(p,{type:"primary",size:"large",block:"",loading:t.loading,onClick:t.handleLogin},{default:n(()=>[H]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(g,{key:"phone",tab:"\u624B\u673A\u53F7\u767B\u5F55"},{default:n(()=>[o(x,{model:t.formState,rules:t.rules,ref:"formRef"},{default:n(()=>[o(r,{name:"username"},{default:n(()=>[o(u,{value:t.formState.username,"onUpdate:value":e[2]||(e[2]=c=>t.formState.username=c),size:"large",placeholder:"\u624B\u673A\u53F7\u7801"},{prefix:n(()=>[o(S)]),_:1},8,["value"])]),_:1}),o(r,{name:"msgCode"},{default:n(()=>[o(u,{value:t.formState.password,"onUpdate:value":e[3]||(e[3]=c=>t.formState.password=c),size:"large",placeholder:"\u77ED\u4FE1\u9A8C\u8BC1\u7801",onPressEnter:t.handleLogin},{prefix:n(()=>[o(i)]),suffix:n(()=>[J]),_:1},8,["value","onPressEnter"])]),_:1}),o(r,null,{default:n(()=>[o(p,{type:"primary",size:"large",block:"",loading:t.loading,onClick:t.handleLogin},{default:n(()=>[K]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),o(g,{key:"qrcode",tab:"\u4E8C\u7EF4\u7801\u767B\u5F55",class:"align-center"},{default:n(()=>[o(l,{text:"https://mengxianghan.github.io/xy-admin/demo/",size:240}),o(_,{plain:""},{default:n(()=>[Q]),_:1})]),_:1})]),_:1})])}const ne=E(G,[["render",W]]);export{ne as default};
