var R=Object.defineProperty;var w=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var y=(d,a,o)=>a in d?R(d,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[a]=o,x=(d,a)=>{for(var o in a||(a={}))A.call(a,o)&&y(d,o,a[o]);if(w)for(var o of w(a))N.call(a,o)&&y(d,o,a[o]);return d};var U=(d,a,o)=>new Promise((e,s)=>{var c=r=>{try{n(o.next(r))}catch(m){s(m)}},u=r=>{try{n(o.throw(r))}catch(m){s(m)}},n=r=>r.done?e(r.value):Promise.resolve(r.value).then(c,u);n((o=o.apply(d,a)).next())});import{_ as T,r as C,h as v,i as h,l as V,w as i,e as t,d as P,F as j,q as z,s as q,D as G}from"./index.a8948c02.js";import{u as H}from"./useModal.97c00550.js";import{u as I}from"./useForm.049bdf41.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const J={name:"Edit",emits:["ok"],setup(d,{emit:a}){const{modal:o,showModal:e,hideModal:s,showLoading:c,hideLoading:u}=H(),{formRecord:n,formState:r,formRef:m,rules:p,formLayout:b,resetForm:S}=I(),l=C(!1),k=C("\u53D6\u6D88");p.value={role:{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4E0A\u7EA7"},name:{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"},alias:{required:!0,message:"\u8BF7\u8F93\u5165\u522B\u540D"},sort:{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F"}};function F(){e({type:"create",title:"\u65B0\u5EFA\u83DC\u5355"})}function E(f){e({type:"edit",title:"\u7F16\u8F91\u83DC\u5355"}),r.value=q(f),n.value=f}function L(f){e({type:"preview",title:"\u67E5\u770B\u89D2\u8272"}),r.value=q(f),l.value=!0,k.value="\u5173\u95ED"}function O(){m.value.validateFields().then(f=>U(this,null,function*(){var g;c();const M=x({id:(g=r.value)==null?void 0:g.id},f);let _=null;_=yield G.common.saveData(M).catch(()=>{u()}),u(),(_==null?void 0:_.code)===200&&(s(),a("ok"))})).catch(f=>{u()})}function B(){s()}function D(){S(),l.value=!1,k.value="\u53D6\u6D88",u()}return{modal:o,formRef:m,rules:p,formState:r,formLayout:b,disabled:l,cancelText:k,handleCreate:F,handleEdit:E,handlePreview:L,handleOk:O,handleCancel:B,onAfterClose:D}}};function K(d,a,o,e,s,c){const u=v("a-tree-select"),n=v("a-form-item"),r=v("a-radio-group"),m=v("a-input"),p=v("a-switch"),b=v("a-form"),S=v("a-modal");return h(),V(S,{visible:e.modal.visible,title:e.modal.title,width:640,"confirm-loading":e.modal.confirmLoading,"after-close":e.onAfterClose,"ok-button-props":{style:{display:e.disabled?"none":""}},"cancel-text":e.cancelText,onOk:e.handleOk,onCancel:e.handleCancel},{default:i(()=>[t(b,{model:e.formState,rules:e.rules,ref:"formRef","label-col":{style:{width:"80px"}}},{default:i(()=>[t(n,{label:"\u6240\u5C5E\u4E0A\u7EA7"},{default:i(()=>[t(u,{value:e.formState.parent_id,"onUpdate:value":a[0]||(a[0]=l=>e.formState.parent_id=l),"tree-default-expand-all":""},null,8,["value"])]),_:1}),t(n,{label:"\u7C7B\u578B",name:"type"},{default:i(()=>[t(r,{value:e.formState.type,"onUpdate:value":a[1]||(a[1]=l=>e.formState.type=l),options:[{label:"\u83DC\u5355",value:"menu"},{label:"\u6309\u94AE",value:"button"}]},null,8,["value"])]),_:1}),t(n,{label:"\u540D\u79F0",name:"name"},{default:i(()=>[t(m,{value:e.formState.name,"onUpdate:value":a[2]||(a[2]=l=>e.formState.name=l)},null,8,["value"])]),_:1}),t(n,{label:"\u522B\u540D",name:"alias",extra:"\u7CFB\u7EDF\u552F\u4E00\u4E14\u4E0E\u5185\u7F6E\u7EC4\u4EF6\u540D\u4E00\u81F4\uFF0C\u5426\u5219\u5BFC\u81F4\u7F13\u5B58\u5931\u6548"},{default:i(()=>[t(m,{value:e.formState.alias,"onUpdate:value":a[3]||(a[3]=l=>e.formState.alias=l)},null,8,["value"])]),_:1}),e.formState.type==="menu"?(h(),P(j,{key:0},[t(n,{label:"\u8DF3\u8F6C\u65B9\u5F0F",name:"type"},{default:i(()=>[t(r,{value:e.formState.target,"onUpdate:value":a[4]||(a[4]=l=>e.formState.target=l),options:[{label:"\u9ED8\u8BA4",value:1},{label:"iframe",value:2},{label:"\u5916\u90E8\u94FE\u63A5",value:3}]},null,8,["value"])]),_:1}),t(n,{label:"\u56FE\u6807",name:"icon"},{default:i(()=>[t(m,{value:e.formState.icon,"onUpdate:value":a[5]||(a[5]=l=>e.formState.icon=l)},null,8,["value"])]),_:1}),t(n,{label:"\u8DEF\u7531\u5730\u5740",name:"path"},{default:i(()=>[t(m,{value:e.formState.path,"onUpdate:value":a[6]||(a[6]=l=>e.formState.path=l)},null,8,["value"])]),_:1}),t(n,{label:"\u6A21\u677F",name:"tpl"},{default:i(()=>[t(m,{value:e.formState.tpl,"onUpdate:value":a[7]||(a[7]=l=>e.formState.tpl=l)},null,8,["value"])]),_:1}),t(n,{label:"\u89C6\u56FE\u5730\u5740",name:"view"},{default:i(()=>[t(m,{value:e.formState.view,"onUpdate:value":a[8]||(a[8]=l=>e.formState.view=l)},null,8,["value"])]),_:1}),t(n,{label:"\u83DC\u5355\u9AD8\u4EAE",name:"active",extra:"\u5B50\u8282\u70B9\u6216\u8BE6\u60C5\u9875\u9700\u8981\u9AD8\u4EAE\u7684\u4E0A\u7EA7\u83DC\u5355\u522B\u540D"},{default:i(()=>[t(m,{value:e.formState.active,"onUpdate:value":a[9]||(a[9]=l=>e.formState.active=l)},null,8,["value"])]),_:1}),t(n,{label:"\u9690\u85CF",name:"is_menu",extra:"\u4E0D\u663E\u793A\u5728\u5BFC\u822A\u4E2D\uFF0C\u4F46\u4F9D\u7136\u53EF\u4EE5\u8BBF\u95EE\uFF0C\u4F8B\u5982\u8BE6\u60C5\u9875"},{default:i(()=>[t(p,{checked:e.formState.is_menu,"onUpdate:checked":a[10]||(a[10]=l=>e.formState.is_menu=l)},null,8,["checked"])]),_:1})],64)):z("",!0)]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading","after-close","ok-button-props","cancel-text","onOk","onCancel"])}const ee=T(J,[["render",K]]);export{ee as default};
