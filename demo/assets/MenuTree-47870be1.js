var w=(v,o,s)=>new Promise((e,c)=>{var m=t=>{try{l(s.next(t))}catch(n){c(n)}},d=t=>{try{l(s.throw(t))}catch(n){c(n)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(m,d);l((s=s.apply(v,o)).next())});import{_ as D,r as g,o as B,D as N,h as i,L as S,B as b,i as p,q as x,w as _,e as u,l as y,j as h,d as M,s as k,H as O,v as T,M as V,m as L}from"./index-f770ad8c.js";import{u as K}from"./usePagination-965b137c.js";import"./tinymce-87fd2522.js";import"./echarts-c0f2d21b.js";const j={name:"MenuTree",emits:["select","ready"],setup(v,{emit:o}){const{list:s,loading:e}=K(),c=g([]),m=g("");B(()=>{d()});function d(){return w(this,null,function*(){e.value=!0;const{code:n,data:r}=yield N.system.getNewMenuList().catch(()=>{e.value=!1});if(e.value=!1,n===200){const{rows:f}=r;s.value=f,o("ready",f)}})}function l(n,{node:r}){n.length&&(c.value=n,o("select",r))}function t(){V.confirm({title:"删除提示",content:"确认删除？",onOk:()=>w(this,null,function*(){L.info("点击了删除")})})}return{keyword:m,loading:e,selectedKeys:c,list:s,handleSelect:l,handleDelete:t}}},q={class:"tree-row"},E={class:"tree-row__name"},H={key:0},I={class:"color-error"},P={key:1};function U(v,o,s,e,c,m){const d=i("a-input-search"),l=i("icon-plus-outlined"),t=i("icon-delete-outlined"),n=i("a-space"),r=i("a-tree"),f=i("a-card"),C=S("loading");return b((p(),x(f,{bordered:!1,type:"flex"},{title:_(()=>[u(d,{value:e.keyword,"onUpdate:value":o[0]||(o[0]=a=>e.keyword=a),"allow-clear":"",placeholder:"请输入关键词搜索"},null,8,["value"])]),actions:_(()=>[y("div",null,[u(l),h(" 新建菜单 ")])]),default:_(()=>[e.loading?T("",!0):(p(),x(r,{key:0,"selected-keys":e.selectedKeys,"tree-data":e.list,"field-names":{title:"name",children:"children",key:"key"},"default-expand-all":"","block-node":"",onSelect:e.handleSelect},{title:_(a=>[y("div",q,[y("div",E,[a.name.indexOf(e.keyword)>-1?(p(),M("span",H,[h(k(a.name.substr(0,a.name.indexOf(e.keyword)))+" ",1),y("span",I,k(e.keyword),1),h(" "+k(a.name.substr(a.name.indexOf(e.keyword)+e.keyword.length)),1)])):(p(),M("span",P,k(a.name),1))]),u(n,{class:"tree-row__actions",onClick:o[1]||(o[1]=O(()=>{},["stop"]))},{default:_(()=>[u(l),u(t,{onClick:z=>e.handleDelete(a)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["selected-keys","tree-data","onSelect"]))]),_:1})),[[C,e.loading]])}const R=D(j,[["render",U],["__scopeId","data-v-63044496"]]);export{R as default};
