var F=Object.defineProperty;var h=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var C=(n,o,e)=>o in n?F(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,k=(n,o)=>{for(var e in o||(o={}))L.call(o,e)&&C(n,e,o[e]);if(h)for(var e of h(o))M.call(o,e)&&C(n,e,o[e]);return n};var g=(n,o,e)=>new Promise((a,m)=>{var d=t=>{try{l(e.next(t))}catch(i){m(i)}},r=t=>{try{l(e.throw(t))}catch(i){m(i)}},l=t=>t.done?a(t.value):Promise.resolve(t.value).then(d,r);l((e=e.apply(n,o)).next())});import{_ as R,h as u,i as y,l as A,w as _,e as p,s as B,D as q}from"./index.a8948c02.js";import{u as N}from"./useModal.97c00550.js";import{u as U}from"./useForm.049bdf41.js";import"./tinymce.b4091e4a.js";import"./echarts.98d40a9a.js";const V={name:"Edit",emits:["ok"],setup(n,{emit:o}){const{modal:e,showModal:a,hideModal:m,showLoading:d,hideLoading:r}=N(),{formRef:l,rules:t,formRecord:i,formState:c,resetForm:w}=U();t.value={title:{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}};function b(){a({title:"\u65B0\u5EFA"})}function x(s){a({title:"\u7F16\u8F91"}),i.value=s,c.value=B(s)}function O(){l.value.validateFields().then(s=>g(this,null,function*(){var v;d();const E=k({id:(v=c.value)==null?void 0:v.id},s);let f=null;f=yield q.common.saveData(E).catch(()=>{r()}),r(),(f==null?void 0:f.code)===200&&(m(),o("ok"))})).catch(s=>{r()})}function S(){m()}function D(){w()}return{modal:e,formRef:l,rules:t,formState:c,handleCreate:b,handleEdit:x,handleOk:O,handleCancel:S,onAfterClose:D}}};function j(n,o,e,a,m,d){const r=u("a-input"),l=u("a-form-item"),t=u("a-form"),i=u("a-modal");return y(),A(i,{visible:a.modal.visible,title:a.modal.title,"confirm-loading":a.modal.confirmLoading,"after-close":a.onAfterClose,onOk:a.handleOk,onCancel:a.handleCancel},{default:_(()=>[p(t,{ref:"formRef",model:a.formState,rules:a.rules,"scroll-to-first-error":"",layout:"vertical"},{default:_(()=>[p(l,{label:"\u6807\u9898",name:"title"},{default:_(()=>[p(r,{value:a.formState.title,"onUpdate:value":o[0]||(o[0]=c=>a.formState.title=c)},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading","after-close","onOk","onCancel"])}const P=R(V,[["render",j]]);export{P as default};
