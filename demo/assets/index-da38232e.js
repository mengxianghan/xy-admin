import{u as R}from"./useForm-bc32d484.js";import B from"./MenuTree-5ecdc64b.js";import{_ as F,r as s,h as o,i as v,q as x,w as n,e,d as I,F as N,j as C,x as T}from"./index-ed9c130b.js";import"./usePagination-86ed5fbd.js";import"./tinymce-87fd2522.js";import"./echarts-c0f2d21b.js";const j={name:"systemNewMenu",components:{MenuTree:B},setup(){const{formState:p}=R(),l=s([{name:"新增",alias:"insert"}]),f=s([]),a=s(null);function c(u){a.value=T(u)}function b(u){f.value=[{name:"顶级菜单",key:0},...u]}return{formState:p,authList:l,menuInfo:a,menuList:f,onMenuSelect:c,onMenuReady:b}}};function q(p,l,f,a,c,b){const u=o("menu-tree"),d=o("a-col"),y=o("a-empty"),i=o("a-card"),r=o("a-input"),m=o("a-form-item"),U=o("a-tree-select"),k=o("a-radio-group"),w=o("a-switch"),M=o("a-button"),g=o("a-form"),S=o("a-table-column"),L=o("x-form-table"),V=o("a-row");return v(),x(V,{type:"flex",gutter:16,style:{position:"absolute",left:0,right:0,top:0,bottom:0}},{default:n(()=>[e(d,{flex:"0 0 300px"},{default:n(()=>[e(u,{onSelect:a.onMenuSelect,onReady:a.onMenuReady},null,8,["onSelect","onReady"])]),_:1}),a.menuInfo?(v(),I(N,{key:1},[e(d,{flex:"1"},{default:n(()=>[e(i,{bordered:!1,title:a.menuInfo.name,type:"flex"},{default:n(()=>[e(g,{model:a.formState,"label-col":{style:{width:"100px"}}},{default:n(()=>[e(m,{label:"名称",name:"name"},{default:n(()=>[e(r,{value:a.formState.name,"onUpdate:value":l[0]||(l[0]=t=>a.formState.name=t)},null,8,["value"])]),_:1}),e(m,{label:"所属上级"},{default:n(()=>[e(U,{value:a.formState.parent_id,"onUpdate:value":l[1]||(l[1]=t=>a.formState.parent_id=t),"tree-data":a.menuList,"field-names":{children:"children",label:"name",key:"key",value:"key"},"tree-default-expand-all":""},null,8,["value","tree-data"])]),_:1}),e(m,{label:"类型",name:"type"},{default:n(()=>[e(k,{value:a.formState.type,"onUpdate:value":l[2]||(l[2]=t=>a.formState.type=t),options:[{label:"菜单",value:1},{label:"iframe",value:2},{label:"外链",value:3}]},null,8,["value"])]),_:1}),e(m,{label:"别名",name:"alias",extra:"系统唯一且与内置组件名一致，否则导致缓存失效"},{default:n(()=>[e(r,{value:a.formState.alias,"onUpdate:value":l[3]||(l[3]=t=>a.formState.alias=t)},null,8,["value"])]),_:1}),e(m,{label:"图标",name:"icon"},{default:n(()=>[e(r,{value:a.formState.icon,"onUpdate:value":l[4]||(l[4]=t=>a.formState.icon=t)},null,8,["value"])]),_:1}),e(m,{label:"路由地址",name:"path"},{default:n(()=>[e(r,{value:a.formState.path,"onUpdate:value":l[5]||(l[5]=t=>a.formState.path=t)},null,8,["value"])]),_:1}),e(m,{label:"重定向",name:"redirect"},{default:n(()=>[e(r,{value:a.formState.redirect,"onUpdate:value":l[6]||(l[6]=t=>a.formState.redirect=t)},null,8,["value"])]),_:1}),e(m,{label:"视图地址",name:"view"},{default:n(()=>[e(r,{value:a.formState.view,"onUpdate:value":l[7]||(l[7]=t=>a.formState.view=t)},null,8,["value"])]),_:1}),e(m,{label:"菜单高亮",name:"active",extra:"子节点或详情页需要高亮的上级菜单别名"},{default:n(()=>[e(r,{value:a.formState.active,"onUpdate:value":l[8]||(l[8]=t=>a.formState.active=t)},null,8,["value"])]),_:1}),e(m,{label:"隐藏",name:"is_menu",extra:"不显示在导航中，但依然可以访问，例如详情页"},{default:n(()=>[e(w,{checked:a.formState.is_menu,"onUpdate:checked":l[9]||(l[9]=t=>a.formState.is_menu=t)},null,8,["checked"])]),_:1}),e(m,{label:" ",colon:!1},{default:n(()=>[e(M,{type:"primary"},{default:n(()=>[C("保存")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1}),e(d,{flex:"1"},{default:n(()=>[e(i,{bordered:!1,title:"权限按钮",type:"flex"},{default:n(()=>[e(L,{modelValue:a.authList,"onUpdate:modelValue":l[10]||(l[10]=t=>a.authList=t),"row-tpl":{name:"",alias:""},bordered:""},{default:n(()=>[e(S,{title:"名称","data-index":"name"},{default:n(({record:t})=>[e(r,{value:t.name,"onUpdate:value":_=>t.name=_},null,8,["value","onUpdate:value"])]),_:1}),e(S,{title:"标识","data-index":"alias"},{default:n(({record:t})=>[e(r,{value:t.alias,"onUpdate:value":_=>t.alias=_},null,8,["value","onUpdate:value"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)):(v(),x(d,{key:0,flex:"1"},{default:n(()=>[e(i,{bordered:!1,type:"flex"},{default:n(()=>[e(y,{description:"请选择菜单"})]),_:1})]),_:1}))]),_:1})}const J=F(j,[["render",q]]);export{J as default};
