var M=Object.defineProperty;var k=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var x=(t,a,o)=>a in t?M(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,S=(t,a)=>{for(var o in a||(a={}))R.call(a,o)&&x(t,o,a[o]);if(k)for(var o of k(a))A.call(a,o)&&x(t,o,a[o]);return t};var w=(t,a,o)=>new Promise((e,m)=>{var v=l=>{try{r(o.next(l))}catch(s){m(s)}},i=l=>{try{r(o.throw(l))}catch(s){m(s)}},r=l=>l.done?e(l.value):Promise.resolve(l.value).then(v,i);r((o=o.apply(t,a)).next())});import{u as B}from"./useModal-5ff77b06.js";import{u as N}from"./useForm-c124bf97.js";import{_ as T,r as C,h as f,i as P,q as V,w as u,e as d,x as y,D as j}from"./index-f770ad8c.js";import"./tinymce-87fd2522.js";import"./echarts-c0f2d21b.js";const z={name:"Edit",emits:["ok"],setup(t,{emit:a}){const{modal:o,showModal:e,hideModal:m,showLoading:v,hideLoading:i}=B(),{formRecord:r,formState:l,formRef:s,rules:_,resetForm:p}=N(),n=C(!1),h=C("取消");_.value={role:{required:!0,message:"请选择所属上级"},name:{required:!0,message:"请输入名称"},alias:{required:!0,message:"请输入别名"},sort:{required:!0,message:"请输入排序"}};function q(){e({type:"create",title:"新建角色"})}function D(c){e({type:"edit",title:"编辑角色"}),l.value=y(c),r.value=c}function O(c){e({type:"preview",title:"查看角色"}),l.value=y(c),n.value=!0,h.value="关闭"}function U(){s.value.validateFields().then(c=>w(this,null,function*(){var g;v();const L=S({id:(g=l.value)==null?void 0:g.id},c);let b=null;b=yield j.common.saveData(L).catch(()=>{i()}),i(),(b==null?void 0:b.code)===200&&(m(),a("ok"))})).catch(()=>{i()})}function E(){m()}function F(){p(),n.value=!1,h.value="取消",i()}return{modal:o,cancelText:h,disabled:n,formRef:s,formState:l,rules:_,handleCreate:q,handleEdit:D,handlePreview:O,handleOk:U,handleCancel:E,onAfterClose:F}}};function G(t,a,o,e,m,v){const i=f("a-cascader"),r=f("a-form-item"),l=f("a-input"),s=f("a-input-number"),_=f("a-form"),p=f("a-modal");return P(),V(p,{visible:e.modal.visible,title:e.modal.title,width:480,"confirm-loading":e.modal.confirmLoading,"after-close":e.onAfterClose,"ok-button-props":{style:{display:e.disabled?"none":""}},"cancel-text":e.cancelText,onOk:e.handleOk,onCancel:e.handleCancel},{default:u(()=>[d(_,{ref:"formRef",model:e.formState,rules:e.rules,"label-col":{style:{width:"90px"}}},{default:u(()=>[d(r,{label:"所属上级",name:"role"},{default:u(()=>[d(i,{value:e.formState.role,"onUpdate:value":a[0]||(a[0]=n=>e.formState.role=n),disabled:e.disabled},null,8,["value","disabled"])]),_:1}),d(r,{label:"名称",name:"name"},{default:u(()=>[d(l,{value:e.formState.name,"onUpdate:value":a[1]||(a[1]=n=>e.formState.name=n),disabled:e.disabled},null,8,["value","disabled"])]),_:1}),d(r,{label:"别名",name:"userName"},{default:u(()=>[d(l,{value:e.formState.alias,"onUpdate:value":a[2]||(a[2]=n=>e.formState.alias=n),disabled:e.disabled},null,8,["value","disabled"])]),_:1}),d(r,{label:"排序",name:"sort"},{default:u(()=>[d(s,{value:e.formState.sort,"onUpdate:value":a[3]||(a[3]=n=>e.formState.sort=n),disabled:e.disabled,min:1,precision:0},null,8,["value","disabled"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","title","confirm-loading","after-close","ok-button-props","cancel-text","onOk","onCancel"])}const X=T(z,[["render",G]]);export{X as default};
